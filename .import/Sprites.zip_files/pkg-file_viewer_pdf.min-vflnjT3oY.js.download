define("file-viewer/preview_doc/app",["require","exports","tslib","react","file-viewer/preview_doc/ppt","file-viewer/preview_doc/pdf","file-viewer/core","file-viewer/preview_doc/data_transform","file-viewer/preview_doc/password_modal","file-viewer/preview_doc/preview_doc_toolbar","file-viewer/preview_error"],function(e,t,n,o,r,a,i,s,l,d,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importStar(o);var p=parseInt("16px",10),u=parseInt("184px",10),f=(function(e){function t(){var t=e.apply(this,arguments)||this;return t._pdfRenderer=null,t.state={failedPasswordAttempt:0,transformedData:t.props.rivieraData?s.transformData(t.props.rivieraData):t.props.data},t.handlePageChange=function(e,n){t.props.dispatch(i.updateDocCurrentPageIndex({fileViewerId:t.props.id,fileIdOrRevisionId:t.props.fileMetadata.file_id,pageIndex:e,sourceContext:n}))},t.handlePdfPageChange=function(e){t.handlePageChange(e,"mouse_wheel")},t.handlePasswordSubmit=function(e){var n=t.props,o=n.fileMetadata,r=n.previewMetadata;if(r&&r.content){var a=r.content,s=a.refresh_url,l=a.text_url_tmpl,d=a.image_url_tmpl;i.invariant(!!s,"Cannot send password! Missing refresh_url from preview metadata"),t.props.dispatch(i.refreshBlobAction({fileIdOrRevisionId:o.file_id,refreshUrl:s,oldPreview:{text_url_tmpl:l,image_url_tmpl:d},password:e}))}},t}return n.__extends(t,e),t.prototype.recalculateFitScaleFactor=function(e){void 0===e&&(e=this.props);var t=e.rivieraData,n=e.filePreviewUiData.isDocSidebarOpen,o=e.width,r=e.height;if(t&&t.metadata){var a=o-2*p-(n?u:0),i=r-2*p;this.setState({fitScaleFactor:Math.max(0,Math.min.apply(Math,t.metadata.dimensions.reduce(function(e,t){var n=t[0],o=t[1];return e.concat([a/n,i/o])},[])))})}},t.prototype.componentDidMount=function(){this.recalculateFitScaleFactor()},t.prototype.componentWillReceiveProps=function(e){var t=e.rivieraData;this.props.fileMetadata.file_id!==e.fileMetadata.file_id?this.setState({failedPasswordAttempt:0}):t&&t!==this.props.rivieraData&&t.error&&12===t.error.statusCode&&this.setState({failedPasswordAttempt:this.state.failedPasswordAttempt+1}),t!==this.props.rivieraData&&this.setState({transformedData:t?s.transformData(t):e.data}),this.props.filePreviewUiData.currentPageIndex!==e.filePreviewUiData.currentPageIndex&&this._pdfRenderer&&this._pdfRenderer.jumpToPage(e.filePreviewUiData.currentPageIndex||0),this.recalculateFitScaleFactor(e)},t.prototype.render=function(){var e=this,t=this.props,s=t.dispatch,p=t.id,u=t.fileMetadata,f=t.rivieraData,g=t.intl,m=t.resolveAsset,h=this.state,v=h.failedPasswordAttempt,b=h.transformedData,_=h.fitScaleFactor,w=this.props.filePreviewUiData;return f&&f.error&&12===f.error.statusCode?v>3?o.createElement(c.PasswordProtected,{fileName:u.file_name,intl:g,resolveAsset:m}):o.createElement(l.PasswordModal,{enteredWrongPassword:!!v,formatMessage:g.formatMessage,onSubmit:this.handlePasswordSubmit}):(w&&!w.scaleFactor&&(w=n.__assign({},w,{scaleFactor:_})),o.createElement("div",null,i.PRESENTATION_EXTS.includes(i.getFileExtension(u.file_name))?o.createElement(r.PreviewPPT,Object.assign({},this.props,{filePreviewUiData:w,data:b,onPageChange:this.handlePageChange})):o.createElement(a.PreviewPDF,Object.assign({},this.props,{ref:function(t){return e._pdfRenderer=t},filePreviewUiData:w,data:b,onPageChange:this.handlePdfPageChange})),o.createElement(d.PreviewDocToolbar,{currentPageIndex:w.currentPageIndex||0,dispatch:s,fileViewerId:p,fileId:u.file_id,formatMessage:g.formatMessage,isDocSidebarOpen:w.isDocSidebarOpen||!1,pageCount:f?f.pages.length:1,scaleFactor:w.scaleFactor||1,theme:"osx"})))},t})(o.PureComponent);t.PreviewDoc=f}),define("file-viewer/preview_doc/data_transform",["require","exports","tslib","file-viewer/preview_doc/text_transform"],function(e,t,n,o){"use strict";function r(e){var t=[];return e.metadata&&Array.isArray(e.pages)?e.pages.map(function(e){return n.__assign({},e,{textboxes:e.textboxes.map(function(e){var t=o.transform(e.t);return n.__assign({},e,{transformedText:t.str,dir:t.dir})})})}):t}Object.defineProperty(t,"__esModule",{value:!0}),t.transformData=r}),define("file-viewer/preview_doc/error_snackbar",["require","exports","tslib","react","spectrum/snackbar","file-viewer/core"],function(e,t,n,o,r,a){"use strict";function i(){}Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importStar(o);t.ErrorSnackbar=function(e){var t=e.error,n=e.onSubmit,a=e.onCancel,i=e.className,s=e.formatMessage;return o.createElement(r.Snackbar,{className:"_18ILuEjD0J "+i,title:t,variant:"fail",disablePositioningAndBackdrop:!0},o.createElement(r.SnackbarAction,{onClick:n},s({id:"ACvIY",defaultMessage:"Reload"})),o.createElement(r.SnackbarAction,{onClick:a},s({id:"1_qu7",defaultMessage:"Close"})))},t.ErrorSnackbar.defaultProps={formatMessage:a.dummyFormatMessage,error:"",onSubmit:i,onCancel:i}}),define("file-viewer/preview_doc/img_layer",["require","exports","tslib","react","file-viewer/preview_doc/layer_event_actions"],function(e,t,n,o,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importStar(o);var a=(function(e){function t(){var t=e.apply(this,arguments)||this;return t.el=null,t.handleImageLoad=function(){t.props.dispatch(r.imgLoad(t.props.fileMetadata.file_id,t.props.data.pageIndex))},t.handleImageError=function(){t.props.dispatch(r.imgError(t.props.fileMetadata.file_id,t.props.data.pageIndex))},t}return n.__extends(t,e),t.prototype.componentDidMount=function(){this.fireEventHandlersIfNeeded()},t.prototype.componentDidUpdate=function(e){e.fileMetadata.file_id!==this.props.fileMetadata.file_id&&this.fireEventHandlersIfNeeded()},t.prototype.fireEventHandlersIfNeeded=function(){this.el&&this.el.complete&&(this.el.naturalHeight||this.el.naturalWidth?this.handleImageLoad():this.handleImageError())},t.prototype.render=function(){var e=this,t=this.props,n=t.data.imgUrls,r=t.filePreviewUiData.scaleFactor,a=void 0===r?0:r,i=t.fileMetadata;return o.createElement("div",{className:"_1qH62_aIXP"},o.createElement("img",{ref:function(t){return e.el=t},alt:i.file_name,width:"100%",role:"tabpanel","aria-hidden":"true",src:a>=2?n["4x"]:n["1x"],onLoad:this.handleImageLoad,onError:this.handleImageError}))},t})(o.PureComponent);t.ImgLayer=a}),define("file-viewer/preview_doc",["require","exports","file-viewer/preview_doc/sidebar","file-viewer/preview_doc/links_layer","file-viewer/preview_doc/text_transform","file-viewer/preview_doc/img_layer","file-viewer/preview_doc/text_layer","file-viewer/preview_doc/text_transform","file-viewer/preview_doc/page","file-viewer/preview_doc/error_snackbar","file-viewer/preview_doc/types","file-viewer/preview_doc/ppt","file-viewer/preview_doc/pdf_pages","file-viewer/preview_doc/pdf","file-viewer/preview_doc/password_modal","file-viewer/preview_doc/layers","file-viewer/preview_doc/app"],function(e,t,n,o,r,a,i,s,l,d,c,p,u,f,g,m,h){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sidebar=n.Sidebar,t.SIDEBAR_THUMBNAIL_WIDTH=n.SIDEBAR_THUMBNAIL_WIDTH,t.LinksLayer=o.LinksLayer,t.isLinkUrl=o.isLinkUrl,t.normalizeUrl=r.normalizeUrl,t.ImgLayer=a.ImgLayer,t.TextLayer=i.TextLayer,t.transformText=s.transform,t.Page=l.Page,t.ErrorSnackbar=d.ErrorSnackbar,t.TextNodeType=c.TextNodeType,t.TextDir=c.TextDir,t.PreviewPPT=p.PreviewPPT,t.PdfPages=u.PdfPages,t.PreviewPDF=f.PreviewPDF,t.PasswordModal=g.PasswordModal,t.defaultLayerRenderFn=m.defaultLayerRenderFn,t.PreviewDoc=h.PreviewDoc}),define("file-viewer/preview_doc/layer_event_actions",["require","exports"],function(e,t){"use strict";function n(e,t){return{type:"@@link_layer/click",payload:{fileId:e,pageIndex:t}}}function o(e,t){return{type:"@@img_layer/loaded",payload:{fileId:e,pageIndex:t}}}function r(e,t){return{type:"@@img_layer/error",payload:{fileId:e,pageIndex:t}}}function a(e,t){return{type:"@@text_layer/rendered",payload:{fileId:e,pageIndex:t}}}Object.defineProperty(t,"__esModule",{value:!0}),(function(e){e.ImgLoaded="@@img_layer/loaded",e.ImgError="@@img_layer/error",e.TextRendered="@@text_layer/rendered",e.InternalLinkClicked="@@link_layer/click"})(t.Action||(t.Action={})),t.internalLinkClick=n,t.imgLoad=o,t.imgError=r,t.textRendered=a}),define("file-viewer/preview_doc/layers",["require","exports","tslib","react","file-viewer/preview_doc/img_layer","file-viewer/preview_doc/text_layer","file-viewer/preview_doc/links_layer"],function(e,t,n,o,r,a,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importStar(o),t.defaultLayerRenderFn=function(e){return function(t){return[o.createElement(r.ImgLayer,Object.assign({},e,t,{legacyProps:void 0,key:"imgLayer"})),o.createElement(a.TextLayer,Object.assign({},e,t,{legacyProps:void 0,key:"textLayer"})),o.createElement(i.LinksLayer,Object.assign({},e,t,{legacyProps:void 0,key:"linksLayer"}))]}}}),define("file-viewer/preview_doc/links_layer",["require","exports","tslib","react","file-viewer/preview_doc/text_transform","file-viewer/preview_doc/layer_event_actions"],function(e,t,n,o,r,a){"use strict";function i(e){return!!e.ur}Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importStar(o);t.isLinkUrl=i,t.LinksLayer=function(e){function t(t,n){t.preventDefault(),e.dispatch(a.internalLinkClick(e.fileMetadata.file_id,n))}var n=e.intl.formatMessage,s=e.filePreviewUiData.scaleFactor,l=e.data.links.map(function(e,a){var s=e.a,l=e.r,d=l[0],c=l[1],p=l[2],u=l[3];u<0&&(c+=u,u=-u),p<0&&(d+=p,p=-p);var f={position:"absolute",bottom:c,left:d,width:p,height:u};return i(s)?s.ur.startsWith("mailto:")?o.createElement("a",{key:a,style:f,href:s.ur,"aria-label":n({id:"uh_2T",defaultMessage:"External Link"})}):o.createElement("a",{key:a,style:f,href:r.normalizeUrl(s.ur),target:"_blank",rel:"noreferrer noopener","aria-label":n({id:"uh_2T",defaultMessage:"External Link"})}):o.createElement("div",{key:a,className:"qFXGCc3-qr",style:f,"aria-label":n({id:"PLDnD",defaultMessage:"Internal Link"}),onClick:function(e){return t(e,s.pn)}})});return o.createElement("div",{className:"_1GmxSv9K16",style:{transform:"scale("+s+")"}},l)}}),define("file-viewer/preview_doc/page",["require","exports","tslib","react"],function(e,t,n,o){"use strict";function r(e){if(e){var t=e.getBoundingClientRect(),n=document.body,o=document.documentElement,r=window.pageYOffset||o.scrollTop||n.scrollTop,a=window.pageXOffset||o.scrollLeft||n.scrollLeft,i=o.clientTop||n.clientTop||0,s=o.clientLeft||n.clientLeft||0,l=t.top+r-i,d=t.left+a-s,c=t.right-t.left;return{top:l,left:d,bottom:l+(t.bottom-t.top),right:d+c}}}Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importStar(o);var a=(function(e){function t(){var t=e.apply(this,arguments)||this;return t.pageEl=null,t.onPageRef=function(e){return t.pageEl=e},t.state={},t.updateOffset=function(){var e=r(t.pageEl);e&&t.setState({offset:e})},t}return n.__extends(t,e),t.prototype.render=function(){var e=this.props,t=e.scaleFactor,r=e.children,a=e.onMouseMove,i=e.onMouseUp,s=e.onMouseEnter,l=e.onMouseDown,d=e.className,c=e.data,p=e.isFocused,u=e.legacyLayerProps,f=void 0===u?{}:u,g=c.pageIndex,m=c.dimension,h=m[0],v=m[1];return o.createElement("div",{id:"pageContainer"+(g+1),className:"_3DaXQB8TXp "+(d||""),ref:this.onPageRef,"data-index":g,style:{width:h*t,height:v*t},onMouseDown:l,onMouseMove:a,onMouseUp:i,onMouseEnter:s},r({isFocused:p,data:c,legacyProps:n.__assign({},f,{offset:this.state.offset,pageEl:this.pageEl})}))},t})(o.PureComponent);t.Page=a,a.defaultProps={data:{pageIndex:0,dimension:[0,0],thumbnailUrl:"",imgUrls:{"1x":"","4x":""},textboxes:[],links:[]},scaleFactor:0,children:function(){return null}}}),define("file-viewer/preview_doc/password_modal",["require","exports","tslib","react","spectrum/input","spectrum/modal","file-viewer/core"],function(e,t,n,o,r,a,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importStar(o);var s=(function(e){function t(){var t=e.apply(this,arguments)||this;return t.state={password:""},t.handleInputChange=function(e){t.setState({password:e.currentTarget.value})},t.handlePrimaryAction=function(){t.props.onSubmit(t.state.password)},t.handleFormSubmit=function(e){e.preventDefault(),t.props.onSubmit(t.state.password)},t}return n.__extends(t,e),t.prototype.componentDidMount=function(){"function"==typeof this.props.onComponentDidMount&&this.props.onComponentDidMount()},t.prototype.componentWillReceiveProps=function(){this.setState({password:""})},t.prototype.render=function(){var e=this.props,t=e.enteredWrongPassword,n=e.onDismiss,i=e.formatMessage,s=e.className,l=this.state.password;return o.createElement(a.UtilityModal,{ariaLabel:i({id:"2nXNn",defaultMessage:"Document Password Modal"}),title:i({id:"35GUv",defaultMessage:"This file is password protected"}),primaryAction:i({id:"MBnKP",defaultMessage:"Submit"}),secondaryAction:i({id:"Cx9Xf",defaultMessage:"Cancel"}),overlayClassName:s,onPrimaryAction:this.handlePrimaryAction,onSecondaryAction:n,open:!0},o.createElement("form",{method:"post",onSubmit:this.handleFormSubmit,"data-test":"pdf-password-modal"},o.createElement("label",null,i(t?{id:"2eyfy",defaultMessage:"The password you entered is incorrect, please try again."}:{id:"3X32N",defaultMessage:"Enter the password to open this file."})),o.createElement(r.Input,{className:"_2V2DPcVyRQ",type:"password",value:l,variant:t?"invalid":"default",placeholder:i({id:"NlVBZ",defaultMessage:"Password"}),onChange:this.handleInputChange}),o.createElement("input",{type:"submit",style:{display:"none"}})))},t})(o.PureComponent);t.PasswordModal=s,s.defaultProps={enteredWrongPassword:!1,formatMessage:i.dummyFormatMessage,onSubmit:function(){}}}),define("file-viewer/preview_doc/pdf",["require","exports","tslib","react","file-viewer/preview_doc/sidebar","file-viewer/core","file-viewer/preview_doc/pdf_pages"],function(e,t,n,o,r,a,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importStar(o);var s=(function(e){function t(){var t=e.apply(this,arguments)||this;return t.pdfPages=null,t.containerEl=null,t.pageRendered={},t.state={isSidebarFocused:!1,rendered:!1},t.handleSidebarPageChange=function(e){t.focusSidebar(),t.syncStorePageIndex(e,"doc_sidebar")},t.focusSidebar=function(){t.setState({isSidebarFocused:!0})},t.unfocusSidebar=function(){t.setState({isSidebarFocused:!1})},t.dispatch=function(e){switch(e.type){case"@@link_layer/click":return t.syncStorePageIndex(e.payload.pageIndex,"doc_link");case"@@img_layer/error":return void(t.props.onPageImageError&&t.props.onPageImageError());case"@@img_layer/loaded":return t.pageRendered[e.payload.pageIndex]|=2,t.props.onInteractive(),t.checkPageRendered();case"@@text_layer/rendered":return t.pageRendered[e.payload.pageIndex]|=1,t.checkPageRendered()}t.props.dispatch(e)},t.pageDown=function(){t.pdfPages&&t.pdfPages.pageDown()},t.pageUp=function(){t.pdfPages&&t.pdfPages.pageUp()},t.scrollDown=function(){t.pdfPages&&t.pdfPages.scrollDown()},t.scrollUp=function(){t.pdfPages&&t.pdfPages.scrollUp()},t.jumpToPage=function(e){t.pdfPages&&t.pdfPages.jumpToPage(e)},t}return n.__extends(t,e),t.prototype.checkPageRendered=function(){var e=this;if(!this.state.rendered){Object.keys(this.pageRendered).find(function(t){return 3===e.pageRendered[+t]})&&(this.setState({rendered:!0}),this.props.onRenderSucceeded&&this.props.onRenderSucceeded(),this.updatePageOffset())}},t.prototype.updatePageOffset=function(){this.pdfPages&&this.pdfPages.updatePageOffset()},t.prototype.componentWillReceiveProps=function(e){e.fileMetadata.file_id!==this.props.fileMetadata.file_id&&(this.setState({isSidebarFocused:!1,rendered:!1}),this.pageRendered={},this.syncStorePageIndex(0,"doc_reset"))},t.prototype.getContainerEl=function(){return this.containerEl},t.prototype.syncStorePageIndex=function(e,t){this.props.dispatch(a.updateDocCurrentPageIndex({fileViewerId:this.props.id,fileIdOrRevisionId:this.props.fileMetadata.file_id,pageIndex:e,sourceContext:t})),this.jumpToPage(e)},t.prototype.render=function(){var e=this,t=this.props,n=t.className,a=t.config,s=t.data,l=t.fileMetadata,d=t.filePreviewUiData,c=t.height,p=t.intl,u=t.layerRenderFn,f=t.onMouseDown,g=t.onMouseEnter,m=t.onMouseMove,h=t.onMouseUp,v=t.onPageChange,b=t.onScroll,_=t.pageClassName,w=t.pagesClassName,P=t.previewMetadata,y=t.resolveAsset,M=t.width,A=d.isDocSidebarOpen,E=this.state.rendered;return o.createElement("article",{className:"_2vSqL8i6js "+n,style:{visibility:E?"visible":"hidden",width:M,height:c},ref:function(t){return e.containerEl=t}},o.createElement(r.Sidebar,{isOpened:A,currentPageIndex:d.currentPageIndex||0,pages:s,formatMessage:p.formatMessage,isFocused:this.state.isSidebarFocused,onPageChange:this.handleSidebarPageChange,onFocus:this.focusSidebar,onBlur:this.unfocusSidebar}),o.createElement(i.PdfPages,{className:"EQJE7qmsBz "+w,count:s.length,height:c,onMouseDown:f,onMouseEnter:g,onMouseMove:m,onMouseUp:h,onPageChange:v,onScroll:b,pageClassName:_,pages:s,ref:function(t){return e.pdfPages=t},scaleFactor:d.scaleFactor||0,width:A?M-r.SIDEBAR_THUMBNAIL_WIDTH:M},u({config:a,dispatch:this.dispatch,fileMetadata:l,filePreviewUiData:d,intl:p,previewMetadata:P,resolveAsset:y})))},t})(o.PureComponent);t.PreviewPDF=s}),define("file-viewer/preview_doc/pdf_pages",["require","exports","tslib","react","external/lodash","file-viewer/preview_doc/page"],function(e,t,n,o,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importStar(o);var i=(function(e){function t(){var t=e.apply(this,arguments)||this;return t.state={visibleItemIndices:{},currentPageIndex:0},t.pageEls=[],t.viewportEl=null,t.viewportElRef=function(e){return t.viewportEl=e},t.intersectionObserver=null,t.ol=null,t.handleScrollTopChange=function(e){var n=(void 0===e?t.props:e).onScroll;t.updatePageOffset(),n&&n()},t.throttledHandleScrollTopChange=r.throttle(function(e){return t.handleScrollTopChange()},50,{leading:!1,trailing:!0}),t.scrollDown=function(){t.viewportEl&&t.viewportEl.scrollTo(0,t.viewportEl.scrollTop+60)},t.scrollUp=function(){t.viewportEl&&t.viewportEl.scrollTo(0,t.viewportEl.scrollTop-60)},t.pageUp=function(){t.scrollToPage(Math.max(0,t.state.currentPageIndex-1))},t.pageDown=function(){t.props.count&&t.scrollToPage(Math.min(t.props.count-1,t.state.currentPageIndex+1))},t.handleIntersection=function(e){for(var o=n.__assign({},t.state.visibleItemIndices),r=0,a=e;r<a.length;r++){var i=a[r],s=i.isIntersecting;o[+i.target.dataset.index]=s}var l=Object.keys(o).filter(function(e){return o[+e]}).map(Number),d=Math.min.apply(Math,l);t.setState({visibleItemIndices:l.reduce(function(e,t){return e[t]=!0,e},{}),currentPageIndex:d})},t}return n.__extends(t,e),t.prototype.jumpToPage=function(e){this.scrollToPage(e)},t.prototype.scrollToPage=function(e){var t=this.props.count;if(!(e<0||e>=t)&&this.ol){var n=this.ol.children[e];n&&void 0!==n.scrollIntoView&&n.scrollIntoView(!0)}},t.prototype.updatePageOffset=function(){this.pageEls.forEach(function(e){return e&&e.updateOffset()})},t.prototype.componentDidMount=function(){var e=this;"undefined"!=typeof IntersectionObserver&&(this.intersectionObserver=new IntersectionObserver(this.handleIntersection,{root:this.viewportEl,rootMargin:"0px",threshold:.01})),this.ol&&this.intersectionObserver&&Array.from(this.ol.children).forEach(function(t){return e.intersectionObserver.observe(t)})},t.prototype.componentWillReceiveProps=function(e){var t=this;e.pages!==this.props.pages&&this.intersectionObserver&&this.ol&&Array.from(this.ol.children).forEach(function(e){return t.intersectionObserver.unobserve(e)})},t.prototype.componentDidUpdate=function(e,t){var n=this;e.pages!==this.props.pages&&this.intersectionObserver&&this.ol&&Array.from(this.ol.children).forEach(function(e){return n.intersectionObserver.observe(e)}),t.currentPageIndex!==this.state.currentPageIndex&&this.props.onPageChange&&this.props.onPageChange(this.state.currentPageIndex,t.currentPageIndex),e.scaleFactor!==this.props.scaleFactor&&this.scrollToPage(t.currentPageIndex)},t.prototype.render=function(){var e=this,t=this.props,n=t.children,r=t.pages,i=t.scaleFactor,s=t.onMouseDown,l=t.onMouseEnter,d=t.onMouseMove,c=t.onMouseUp,p=t.pageClassName,u=t.className,f=t.legacyLayerProps,g=this.state.currentPageIndex,m=0,h=0,v=Object.keys(this.state.visibleItemIndices).map(function(e){return+e});v.length&&(m=Math.max(0,Math.min.apply(Math,v)),h=Math.max.apply(Math,v));var b=r.map(function(t){var r=t.pageIndex,u=t.dimension,v=u[0],b=u[1],_=r-m,w={width:v*i,height:b*i},P=function(){return null};return r>=m&&r<=h&&(P=n),o.createElement("li",{"data-index":r,key:r,style:w},o.createElement(a.Page,{className:p,ref:function(t){return e.pageEls[_]=t},data:t,onMouseDown:s,onMouseEnter:l,onMouseMove:d,onMouseUp:c,scaleFactor:i,isFocused:g===r,legacyLayerProps:f},P))});return o.createElement("div",{className:u,onScroll:this.throttledHandleScrollTopChange,ref:this.viewportElRef},o.createElement("ol",{ref:function(t){return e.ol=t}},b))},t})(o.PureComponent);t.PdfPages=i}),define("file-viewer/preview_doc/ppt",["require","exports","tslib","react","file-viewer/preview_doc/sidebar","external/lodash","file-viewer/core/utils","file-viewer/preview_doc/page"],function(e,t,n,o,r,a,i,s){"use strict";function l(e,t){return i.calculateFitBox(t[0],t[1],e[0]/e[1])[0]/e[0]}Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importStar(o);var d=(function(e){function t(){var t=e.apply(this,arguments)||this;return t.state={isSidebarFocused:!0,rendered:!1},t.pageEl=null,t.pageRendered={},t.focusSidebar=function(){t.setState({isSidebarFocused:!0})},t.unfocusSidebar=function(){t.setState({isSidebarFocused:!1})},t.handleSidebarPageChange=function(e){t.focusSidebar(),t.props.onPageChange&&t.props.onPageChange(e,"doc_sidebar")},t.handleWheel=a.debounce(function(e){var n=t.props,o=n.data,r=n.width,a=n.height,i=n.filePreviewUiData,s=i.scaleFactor,d=void 0===s?0:s,c=i.currentPageIndex,p=void 0===c?0:c,u=n.onPageChange;if(o.length){var f=o[p].dimension,g=l(f,[r,a]);d.toFixed(2)<=g.toFixed(2)&&u&&u(p+(e.deltaY>0?1:-1),"mouse_wheel")}},40,{leading:!0,trailing:!1}),t.dispatch=function(e){switch(e.type){case"@@link_layer/click":case"@@img_layer/error":return;case"@@img_layer/loaded":return t.props.onInteractive(),t.pageRendered[e.payload.pageIndex]|=2,t.checkPageRendered();case"@@text_layer/rendered":return t.pageRendered[e.payload.pageIndex]|=1,t.checkPageRendered()}t.props.dispatch(e)},t}return n.__extends(t,e),t.prototype.checkPageRendered=function(){var e=this;!this.state.rendered&&Object.keys(this.pageRendered).find(function(t){return 3===e.pageRendered[+t]})&&(this.setState({rendered:!0}),this.props.onRenderSucceeded&&this.props.onRenderSucceeded(),this.updatePageOffset())},t.prototype.componentWillReceiveProps=function(e){e.fileMetadata.file_id!==this.props.fileMetadata.file_id&&(this.setState({isSidebarFocused:!1,rendered:!1}),this.pageRendered={},this.props.onPageChange&&this.props.onPageChange(0,"doc_reset"))},t.prototype.updatePageOffset=function(){this.pageEl&&this.pageEl.updateOffset()},t.prototype.render=function(){var e=this,t=this.props,n=t.className,a=t.config,i=t.data,l=t.fileMetadata,d=t.filePreviewUiData,c=t.intl,p=t.layerRenderFn,u=t.onPageMouseDown,f=t.onPageMouseEnter,g=t.onPageMouseMove,m=t.onPageMouseUp,h=t.pageClassName,v=t.previewMetadata,b=t.refCallback,_=t.resolveAsset,w=d.scaleFactor,P=void 0===w?0:w,y=d.currentPageIndex,M=void 0===y?0:y,A=d.isDocSidebarOpen,E=this.state,S=E.isSidebarFocused,L=E.rendered;return o.createElement("article",{ref:b,className:"_2vSqL8i6js "+n,style:{visibility:L?"visible":"hidden"}},o.createElement(r.Sidebar,{currentPageIndex:M,pages:i,formatMessage:c.formatMessage,isFocused:S,onPageChange:this.handleSidebarPageChange,onFocus:this.focusSidebar,onBlur:this.unfocusSidebar,isOpened:A}),o.createElement("section",{className:"_3e2JnVcNbI",onWheel:this.handleWheel},o.createElement(s.Page,{ref:function(t){return e.pageEl=t},className:h,key:M,onMouseDown:u,onMouseEnter:f,onMouseMove:g,onMouseUp:m,data:i[M],scaleFactor:P},p({config:a,dispatch:this.dispatch,fileMetadata:l,filePreviewUiData:d,intl:c,previewMetadata:v,resolveAsset:_}))))},t})(o.PureComponent);t.PreviewPPT=d}),define("file-viewer/preview_doc/preview_doc_toolbar",["require","exports","tslib","react","file-viewer/core","file-viewer/toolbar/sidebar_toggle_button","file-viewer/toolbar/toolbar_controls","file-viewer/toolbar/toolbar","file-viewer/toolbar/toolbar_page_indicator"],function(e,t,n,o,r,a,i,s,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importStar(o);var d=function(){};t.DESKTOP_CONFIG=[5,4,2,1,0,7,6],t.WEB_CONFIG=[5,4,2,1,0,7,6,3];var c=(function(e){function t(){var t=e.apply(this,arguments)||this;return t.renderSidebarToggle=function(){return o.createElement(a.SidebarToggleButton,{buttonClassName:"_1k72OJBfkI",className:"ihogYuDhuE",formatMessage:t.props.formatMessage,key:t.props.fileViewerId+"-"+t.props.fileId+"-sidebar-toggle",isSidebarOpen:t.props.isDocSidebarOpen||!1,onSidebarClose:t.closeSidebar,onSidebarOpen:t.openSidebar})},t.renderPageUp=function(){return o.createElement(i.PageUpButton,{buttonClassName:"_1k72OJBfkI",className:"ihogYuDhuE",disabled:!t.props.currentPageIndex||t.props.currentPageIndex<1,formatMessage:t.props.formatMessage,key:t.props.fileViewerId+"-"+t.props.fileId+"-page-up",onClick:t.onPageUp})},t.renderPageIndicator=function(){return o.createElement(l.PageIndicator,{className:"o4F4ePgOMu",currentPageIndex:t.props.currentPageIndex||0,formatMessage:t.props.formatMessage,id:t.props.fileViewerId+"-preview-toolbar-page-indicator",key:t.props.fileViewerId+"-preview-toolbar-page-indicator",onPageNumberUpdated:t.onPageChange,pageCount:t.props.pageCount,shouldShowPageCount:!0})},t.renderPageDown=function(){return o.createElement(i.PageDownButton,{buttonClassName:"_1k72OJBfkI",className:"ihogYuDhuE",disabled:void 0===t.props.currentPageIndex||t.props.currentPageIndex>=t.props.pageCount-1,formatMessage:t.props.formatMessage,key:t.props.fileViewerId+"-"+t.props.fileId+"-page-down",onClick:t.onPageDown})},t.renderZoomIn=function(){return o.createElement(i.ZoomInButton,{buttonClassName:"_1k72OJBfkI",className:"ihogYuDhuE",disabled:void 0!==t.props.scaleFactor&&t.props.scaleFactor>=10,formatMessage:t.props.formatMessage,key:t.props.fileViewerId+"-"+t.props.fileId+"-zoom-in",onClick:t.onZoomIn})},t.renderZoomOut=function(){return o.createElement(i.ZoomOutButton,{buttonClassName:"_1k72OJBfkI",className:"ihogYuDhuE",disabled:void 0!==t.props.scaleFactor&&t.props.scaleFactor<=.1,formatMessage:t.props.formatMessage,key:t.props.fileViewerId+"-"+t.props.fileId+"-zoom-out",onClick:t.onZoomOut})},t.closeSidebar=function(){t.props.dispatch(r.closeDocSidebar({fileViewerId:t.props.fileViewerId,fileIdOrRevisionId:t.props.fileId,sourceContext:"toolbar"}))},t.openSidebar=function(){t.props.dispatch(r.openDocSidebar({fileViewerId:t.props.fileViewerId,fileIdOrRevisionId:t.props.fileId,sourceContext:"toolbar"}))},t.onPageChange=function(e){t.props.dispatch(r.updateDocCurrentPageIndex({fileViewerId:t.props.fileViewerId,fileIdOrRevisionId:t.props.fileId,pageIndex:e,sourceContext:"toolbar"}))},t.onPageDown=function(){var e=t.props,n=e.dispatch,o=e.fileViewerId,a=e.fileId,i=e.currentPageIndex;(void 0===i?0:i)>=e.pageCount-1||n(r.pageDown({fileViewerId:o,fileIdOrRevisionId:a,sourceContext:"toolbar"}))},t.onPageUp=function(){var e=t.props,n=e.dispatch,o=e.fileViewerId,a=e.fileId,i=e.currentPageIndex;(void 0===i?0:i)<1||n(r.pageUp({fileViewerId:o,fileIdOrRevisionId:a,sourceContext:"toolbar"}))},t.onZoomIn=function(){var e=t.props,n=e.dispatch,o=e.fileViewerId,a=e.fileId;n(r.zoomIn({fileViewerId:o,fileIdOrRevisionId:a,sourceContext:"toolbar"}))},t.onZoomOut=function(){var e=t.props,n=e.dispatch,o=e.fileViewerId,a=e.fileId;n(r.zoomOut({fileViewerId:o,fileIdOrRevisionId:a,sourceContext:"toolbar"}))},t}return n.__extends(t,e),t.prototype.render=function(){var e,n=this.props.theme,r=t.getConfigForTheme(n),a=(e={},e[5]=this.renderSidebarToggle,e[4]=d,e[2]=this.renderPageUp,e[1]=this.renderPageIndicator,e[0]=this.renderPageDown,e[7]=this.renderZoomOut,e[6]=this.renderZoomIn,e[3]=d,e);return o.createElement(s.PreviewToolbar,{containerClassName:"_1p8mJnfi0V"},r.map(function(e){var t=a[e];if(t)return t()}))},t})(o.PureComponent);t.PreviewDocToolbar=c,c.getConfigForTheme=function(e){return"web"===e?t.WEB_CONFIG:t.DESKTOP_CONFIG}}),define("file-viewer/preview_doc/sidebar",["require","exports","tslib","react","classnames","file-viewer/core"],function(e,t,n,o,r,a){"use strict";function i(){}function s(e,t){var n=e.children[t];if(!n)return!1;var o=n.offsetTop+n.clientHeight<e.scrollTop||n.offsetTop>e.scrollTop+e.clientHeight;return o&&(e.scrollTop=n.offsetTop),o}function l(e,t){return e.length===t.length&&!e.find(function(e,n){return e.thumbnailUrl!==t[n].thumbnailUrl})}Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importStar(o),r=n.__importDefault(r);var d={container:"_2v4PoiRsrH",open:"_3xDsfsL9DL",thumbnail:"_2ClAleT9eY",loader:"_3H2YpoVw2D _3fqREDOmbd",selected:"_1WLEsxcjZm",focused:"_2AVKrdcdST",thumbnailWidth:"120px",sidebarWidth:"184px"};t.SIDEBAR_THUMBNAIL_WIDTH=parseInt(d.thumbnailWidth,10);var c=(function(e){function t(){var t=e.apply(this,arguments)||this;return t.state={error:!1},t.handleError=function(e){t.setState({error:!0})},t}return n.__extends(t,e),t.prototype.render=function(){var e,t=this.props,n=t.isSelected,a=t.onClick,i=t.index,s=t.css,l=t.formatMessage,d=t.thumbnailUrl,c=t.aspectRatio,p=t.isVisible,u=this.state.error;return o.createElement("li",{"data-index":i},o.createElement("a",{href:"#",onClick:function(e){return a(i)},tabIndex:-1,"aria-current":n?"page":void 0},o.createElement("div",{className:r.default(s.thumbnail,(e={},e[s.selected]=n,e)),style:{height:parseInt(s.thumbnailWidth,10)*c}},p&&u?void 0:o.createElement("i",{className:s.loader}),p&&!u?o.createElement("img",{src:d,onError:this.handleError,alt:l({id:"2yLzB",defaultMessage:"Page {index}"},{index:i})}):void 0),i+1))},t})(o.Component);t.InternalSidebarItem=c;var p=(function(e){function t(){var t=e.apply(this,arguments)||this;return t.state={visibleItemIndices:{}},t.handleIntersection=function(e){var o=t.state.visibleItemIndices,r=e.filter(function(e){return e.isIntersecting}).map(function(e){return e.target.dataset.index}).filter(function(e){return!(e in o)}).reduce(function(e,t){return e[t]=!0,e},{});Object.keys(r).length&&t.setState({visibleItemIndices:n.__assign({},o,r)})},t}return n.__extends(t,e),t.prototype.shouldComponentUpdate=function(e,t){var o=this.props,r=o.pages,i=n.__rest(o,["pages"]),s=e.pages,d=n.__rest(e,["pages"]);return!a.shallowEqual(i,d)||!a.shallowEqual(this.state,t)||!l(r,s)},t.prototype.componentDidMount=function(){var e=this;this.ol&&"undefined"!=typeof IntersectionObserver&&(this.intersectionObserver=new IntersectionObserver(this.handleIntersection,{root:this.ol,rootMargin:"0px",threshold:.1}),Array.from(this.ol.children).forEach(function(t){return e.intersectionObserver.observe(t)}),s(this.ol,this.props.currentPageIndex))},t.prototype.componentWillReceiveProps=function(e){var t=this;l(e.pages,this.props.pages)||(this.setState({visibleItemIndices:{}}),this.ol&&this.intersectionObserver&&Array.from(this.ol.children).forEach(function(e){return t.intersectionObserver.unobserve(e)}))},t.prototype.componentWillUnmount=function(){this.intersectionObserver&&this.intersectionObserver.disconnect()},t.prototype.componentDidUpdate=function(e){var t=this;if(this.ol){e.pages!==this.props.pages&&this.intersectionObserver&&Array.from(this.ol.children).forEach(function(e){return t.intersectionObserver.observe(e)});var n=this.props.currentPageIndex;n!==e.currentPageIndex&&s(this.ol,n)}},t.prototype.render=function(){var e,t=this,n=this.props,a=n.currentPageIndex,i=n.isFocused,s=n.onBlur,l=n.onFocus,p=n.pages,u=n.formatMessage,f=n.style,g=n.isOpened,m=this.state.visibleItemIndices,h=p.map(function(e,n){return o.createElement(c,{key:n,isSelected:a===n,onClick:t.props.onPageChange,index:n,formatMessage:u,thumbnailUrl:e.thumbnailUrl,css:d,isVisible:m[n],aspectRatio:e.dimension[1]/e.dimension[0]})})
;return o.createElement("nav",{className:r.default(d.container,(e={},e[d.focused]=i,e[d.open]=g,e)),"aria-label":u({id:"2w1Rq",defaultMessage:"Document Sidebar"}),style:f},o.createElement("ol",{ref:function(e){return t.ol=e},tabIndex:0,onFocus:l,onBlur:s},h))},t})(o.PureComponent);t.Sidebar=p,p.defaultProps={currentPageIndex:0,pages:[],onPageChange:i,formatMessage:a.dummyFormatMessage}}),define("file-viewer/preview_doc/text_box",["require","exports","tslib","react"],function(e,t,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importStar(o);t.TextBox=function(e){var t=e.data,n=t.r,r=n[0],a=n[1],i=n[2],s=n[3],l=t.d,d=t.dir,c=t.transformedText,p=t.font,u=t.h;a=-a;var f={fontSize:u};if(l&&(f.transform="rotate("+-l+"rad)",f.transformOrigin=r+"px "+a+"px"),p&&(f.fontFamily=p.fontFamily,p.isBold&&(f.fontWeight="bold"),p.isItalic&&(f.fontStyle="italic")),1===c.length){var g=c[0];return o.createElement("text",{className:"_3ziulaHePS",direction:d,height:s,lengthAdjust:"spacingAndGlyphs",style:f,textLength:i,x:r,y:a,"data-test":"textbox"},g.text)}var m=c.reduce(function(e,t){return e+t.text.length},0),h=0,v=c.map(function(e,t){var n=h/m*i+r,l=e.text.length/m*i,d=o.createElement("text",{height:s,key:t,lengthAdjust:"spacingAndGlyphs",textLength:l,x:n,y:a},e.text);switch(h+=e.text.length,e.type){case 1:return o.createElement("a",{key:t,href:"mailto:"+e.text},d);case 2:return o.createElement("a",{key:t,href:e.href,target:"_blank",rel:"noreferrer"},d);default:return d}});return o.createElement("g",{className:"_3ziulaHePS",direction:d,style:f,"data-test":"textbox"},v)}}),define("file-viewer/preview_doc/text_layer",["require","exports","tslib","react","file-viewer/preview_doc/text_box","file-viewer/preview_doc/layer_event_actions"],function(e,t,n,o,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importStar(o);var i=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.componentDidMount=function(){this.props.dispatch(a.textRendered(this.props.fileMetadata.file_id,this.props.data.pageIndex))},t.prototype.componentDidUpdate=function(e){e.data!==this.props.data&&this.props.dispatch(a.textRendered(this.props.fileMetadata.file_id,this.props.data.pageIndex))},t.prototype.render=function(){var e=this.props,t=e.data,n=t.textboxes,a=t.dimension,i=a[0],s=a[1],l=e.filePreviewUiData.scaleFactor,d={transform:"scale("+l+")"},c=n.map(function(e,t){return o.createElement(r.TextBox,{key:t,data:e})});return o.createElement("svg",{className:"_3ndj83M4eq",viewBox:"0 -"+s+" "+i+" "+s,width:i,height:s,style:d,"data-test":"text-layer"},c)},t})(o.PureComponent);t.TextLayer=i}),define("file-viewer/preview_doc/text_transform",["require","exports","modules/clean/react/previews/pdf_viewer/text/unicode","modules/clean/react/previews/pdf_viewer/text/bidi"],function(e,t,n,o){"use strict";function r(e){return"http"===e.substr(0,4)?e:"http://"+e}function a(e){return e.split(l).map(function(e){if(l.test(e))return{type:0,text:e.replace("\t"," ")};var t;return s.test(e)?{text:e,type:1}:(t=e.match(/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/))&&t[2]&&t[4]?{href:r(e),text:e,type:2}:{type:0,text:e}}).reduce(function(e,t){var n=e[e.length-1];return n&&0===n.type&&0===t.type?n.text+=t.text:e.push(t),e},[])}function i(e){for(var t=n.getNormalizedUnicodes(),r="",i=0;i<e.length;i++){var s=e.charAt(i);void 0!==t[s]&&(s=t[s]),s=n.reverseIfRtl(s),"\t"===s&&(s=" "),r+=s}var l=o.bidi(r,-1,!1);return{dir:l.dir,str:a(l.str)}}Object.defineProperty(t,"__esModule",{value:!0});var s=/[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,63}/,l=/(\s+)/;t.normalizeUrl=r,t.transform=i}),define("file-viewer/preview_doc/types",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),(function(e){e.ltr="ltr",e.rtl="rtl",e.ttb="ttb"})(t.TextDir||(t.TextDir={})),(function(e){e[e.text=0]="text",e[e.email=1]="email",e[e.link=2]="link"})(t.TextNodeType||(t.TextNodeType={}))}),define("file-viewer/preview_error",["require","exports","tslib","react","file-viewer/core"],function(e,t,n,o,r){"use strict";function a(e){var t=e.title,n=e.message,r=e.imgSrc,a=e.fileName;return o.createElement("article",{className:i.container},o.createElement("img",{src:r["1x"],srcSet:r["2x"]+" 2x",alt:t}),o.createElement("header",null,o.createElement("h1",null,t)),n?o.createElement("p",{className:i.message},n):null,o.createElement("p",{className:i.fileInfo},a))}Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importStar(o);var i={container:"_1gUqDp17RI",img:"_1lu4dJdsKo",message:"_1d_V7x7-Fc",fileInfo:"MsuCfjDJzN"};t.FiletypeNotSupported=function(e){var t=e.fileMetadata.file_name,n=e.intl.formatMessage,i=e.resolveAsset;return o.createElement(a,{imgSrc:{"1x":i("1j0Ik"),"2x":i("3afH2")},title:n({id:"3QbUM",defaultMessage:"{extension} files can’t currently be previewed. Download the file to see its full contents."},{extension:r.getFileExtension(t)}),fileName:t})},t.PasswordProtected=function(e){var t=e.fileName,n=e.intl,r=e.resolveAsset;return o.createElement(a,{imgSrc:{"1x":r("32YjM"),"2x":r("29R06")},title:n.formatMessage({id:"3XBdD",defaultMessage:"This file is password-protected"}),message:n.formatMessage({id:"2hEJT",defaultMessage:"Remove the password via the original application (eg. MS Word, Adobe Photoshop) to preview the file on dropbox.com, or download the file to see full contents."}),fileName:t})},t.Unavailable=function(e){var t=e.fileMetadata.file_name,n=e.intl.formatMessage,r=e.resolveAsset;return o.createElement(a,{imgSrc:{"1x":r("2NQat"),"2x":r("1M0Da")},title:n({id:"1qFPZ",defaultMessage:"This file cannot be previewed"}),message:n({id:"3QN14",defaultMessage:"This is a supported filetype by Dropbox, but something went wrong. The file may be corrupted or have an incorrect extension. To view its full contents, download the file"}),fileName:t})},t.NoExtension=function(e){var t=e.fileMetadata.file_name,n=e.intl.formatMessage,r=e.resolveAsset;return o.createElement(a,{imgSrc:{"1x":r("2NQat"),"2x":r("1M0Da")},title:n({id:"3IvZ8",defaultMessage:"Files without extensions cannot be previewed"}),message:n({id:"1OWrj",defaultMessage:"File suffixes (or extensions) indicate the type of file, and helps Dropbox generate the preview. Please add an extension, or download the file on your computer to view it."}),fileName:t})},t.FileTooLarge=function(e){var t=e.fileMetadata.file_name,n=e.intl.formatMessage,i=e.resolveAsset,s=e.config;return o.createElement(a,{imgSrc:{"1x":i("3_SVR"),"2x":i("1KZOf")},title:n({id:"1sf_t",defaultMessage:"This file is too big to preview"}),message:n({id:"2Lxyo",defaultMessage:"Couldn’t preview file because its size exceeds {size} maximum. To view, download the file or reduce its size."},{size:r.getFileSizeLimit(t,s)}),fileName:t})},t.FileUploading=function(e){var t=e.fileMetadata.file_name,n=e.intl.formatMessage,r=e.resolveAsset;return o.createElement(a,{imgSrc:{"1x":r("d7hcI"),"2x":r("1WylU")},title:n({id:"2aX8q",defaultMessage:"File is uploading"}),message:n({id:"28Uhd",defaultMessage:"Once the file is fully uploaded and synced, you can preview it on Dropbox. Please wait for the syncing process to complete before previewing the file."}),fileName:t})}}),define("modules/clean/frame_messenger/frame_messenger_client",["require","exports","tslib","modules/clean/frame_messenger/frame_messenger_base","modules/clean/frame_messenger/frame_messenger_logger"],function(e,t,n,o,r){"use strict";function a(e,t){return t.indexOf(e)>=0}Object.defineProperty(t,"__esModule",{value:!0});var i=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._trustedOriginForPosting=null,t._validActions=[],t._parentMessageQueue=[],t._onParentReady=null,t}return n.__extends(t,e),t.prototype.configureParentMessaging=function(e,t,n){void 0===n&&(n=null),this._trustedOriginForPosting=null,this._validActions=t,this._trustedMessageHandler=e,this._onParentReady=n},t.prototype.startListening=function(){e.prototype.startListening.call(this),this.requestParentOrigin()},t.prototype.postMessageToParent=function(e,t){void 0===t&&(t={});var n=this.packagePostMessage(e,t);null===this._trustedOriginForPosting?this._parentMessageQueue.push(n):this.getWindow().parent.postMessage(n,this._trustedOriginForPosting)},t.prototype.dispatchMessage=function(e,t){r.logFrameMessage("frame_messenger_client",{event:e,messageJson:t}),"parent-ready"===t.action&&this.updateParentOrigin(e.origin),a(t.action,this._validActions)&&null!==this._trustedMessageHandler&&this._trustedMessageHandler(t)},t.prototype.resetOriginsForPosting=function(){this._trustedOriginForPosting=null},t.prototype.updateParentOrigin=function(e){var t=this._trustedOriginForPosting;if(!this.isOriginAllowed(e))return!1;if(this._trustedOriginForPosting=e,this._parentMessageQueue.length>0){for(var n=0;n<this._parentMessageQueue.length;n++){var o=this._parentMessageQueue[n],r=JSON.parse(o);this.postMessageToParent(r.action,r.parameters)}this._parentMessageQueue=[]}return null!=this._trustedOriginForPosting&&null==t&&null!==this._onParentReady&&this._onParentReady(),!0},t.prototype.requestParentOrigin=function(){var e=this;this.getWindow().parent.postMessage('{"action": "child-requesting-parent-origin"}',"*");var n=function(){null===e._trustedOriginForPosting&&e.requestParentOrigin()};this.getWindow().setTimeout(n,t._REQUEST_PARENT_ORIGIN_POLL_DELAY)},t._REQUEST_PARENT_ORIGIN_POLL_DELAY=100,t})(o.FrameMessengerBase);t.FrameMessengerClient=i}),define("modules/clean/react/file_viewer/frame_interface",["require","exports","tslib","modules/clean/react/file_viewer/interface","modules/clean/react/previews/frame_messenger_host","modules/clean/frame_messenger/frame_messenger_logger"],function(e,t,n,o,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=["annotation-end-drag","annotation-enter","annotation-hidden","annotation-leave","annotation-placed","annotation-start-drag","annotation-ui-click","annotation-ui-enter","annotation-ui-leave","annotation-ui-over","mouse-up","on-keydown","page-change","page-rendered","scale-change","scroll","doc-metadata-load"],s=(function(e){function t(n){var o=e.call(this,n)||this;return o.handleMessageFromFrame=function(e){o.eventEmitter.emit(e.action,e.parameters)},t.frameMessengerFactory?o.frameMessenger=t.frameMessengerFactory():o.frameMessenger=new r.PreviewFrameMessengerHost,o.frameMessenger.configureChildMessaging('iframe[name="preview-content"]',o.handleMessageFromFrame,i),o.frameMessenger.startListening(),o}return n.__extends(t,e),t.prototype.dispatchEvent=function(e,t){a.logFrameMessage("frame_interface",{eventName:e,data:t}),this.frameMessenger.postMessageToChildren(e,t)},t.prototype.destroy=function(){this.frameMessenger.stopListening()},t.setFrameMessengerFactory=function(e){t.frameMessengerFactory=e},t})(o.FileViewerInterface);t.FileViewerFrameInterface=s}),define("modules/clean/react/file_viewer/interface",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(function(){function e(e){this.eventEmitter=e}return e.prototype.destroy=function(){},e})();t.FileViewerInterface=n}),define("modules/clean/react/file_viewer/sidebar_helpers",["require","exports","modules/clean/react/file_viewer/constants","modules/clean/react/size_class/constants"],function(e,t,n,o){"use strict";function r(e,t,r){return t===o.SizeClass.Large&&!r&&(e===n.DocType.ppt||e===n.DocType.pdf)}Object.defineProperty(t,"__esModule",{value:!0}),t.isSidebarEnabled=r}),define("modules/clean/react/previews/pdf_viewer/annotation_creation_layer",["require","exports","tslib","external/keymaster","external/lodash","react","modules/clean/react/previews/pdf_viewer/event_emitter","modules/clean/react/previews/pdf_viewer/transform","modules/clean/annotations/annotation_controller"],function(e,t,n,o,r,a,i,s,l){"use strict";function d(){return{onMouseDownCallback:function(e){},onMouseMoveCallback:function(e){},onMouseUpCallback:function(e){},onMouseEnterCallback:function(e){},onScrollCallback:function(){}}}Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importDefault(o),r=n.__importStar(r),a=n.__importDefault(a),l=n.__importDefault(l);t.createAnnotationCreationDelegate=d;var c=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={draftAnnotationVersion:0,postedAnnotationKey:"",draftAnnotationExists:!1},t.escKey=function(e){e.stopPropagation(),t.clearDraftAnnotationCommon()},t.onRefAnnotationController=function(e){t.annotationController=e},t.onPlaceDefaultAnnotation=function(){t.props.isFocusedPage&&t.clearDraftAnnotationCommon(!1,"",function(){t.annotationController.createRegion({top:0,left:0,bottom:t.scaledHeight,right:t.scaledWidth})})},t.handleHideAnnotation=function(e){e&&e.excludePage===t.props.pageNumber||t.clearDraftAnnotationCommon()},t.clearDraftAnnotationWithSignal=function(){t.clearDraftAnnotationCommon(!0,"",function(){t.props.frameMessenger.postMessageToParent("annotation-hidden")})},t.clearDraftAnnotationCommon=function(e,o,r){void 0===e&&(e=!0),void 0===o&&(o="");var a={draftAnnotationVersion:t.state.draftAnnotationVersion+1,postedAnnotationKey:o},i=e?n.__assign({},a,{draftAnnotationExists:!1}):a;t.setState(i,r)},t.onResize=r.debounce(t.clearDraftAnnotationCommon,1e3,{leading:!0,trailing:!1}),t.onUpdateAnnotations=function(e){var n=e.annotations.filter(function(e){return"POSTING"===e.commentActivity.status});if(n.length>0){var o=n[0].commentActivity.activity_key;o!==t.state.postedAnnotationKey&&t.clearDraftAnnotationCommon(o)}},t.onAnnotationHiddenCallback=function(){t.setState({draftAnnotationExists:!1}),i.eventEmitter.emit("annotation-hidden"),t.props.frameMessenger.postMessageToParent("annotation-hidden")},t.onAnnotationPlacedCallback=function(e){t.setState({draftAnnotationExists:!0});var n={annotation:t.finalizeAnnotation(e)};i.eventEmitter.emit("annotation-placed",n),t.props.frameMessenger.postMessageToParent("annotation-placed",n)},t.onAnnotationStartDragCallback=function(e){t.props.frameMessenger.postMessageToParent("annotation-start-drag",{annotation:t.finalizeAnnotation(e)})},t.onAnnotationEndDragCallback=function(e){t.props.frameMessenger.postMessageToParent("annotation-end-drag",{annotation:t.finalizeAnnotation(e)})},t.onAnnotationScrollCallback=function(e){e&&t.props.frameMessenger.postMessageToParent("scroll",{annotation:t.finalizeAnnotation(e)})},t.onAnnotationScaleChangeCallback=function(e){t.props.frameMessenger.postMessageToParent("scale-change",{annotation:t.finalizeAnnotation(e)})},t.onAnnotationEnterCallback=function(e){t.props.frameMessenger.postMessageToParent("annotation-enter",{annotation:t.finalizeAnnotation(e)})},t.onAnnotationRegionStart=function(){t.setState({draftAnnotationExists:!0})},t.onAnnotationLeaveCallback=function(e){t.props.frameMessenger.postMessageToParent("annotation-leave",{annotation:t.finalizeAnnotation(e)})},t}return n.__extends(t,e),t.prototype.componentDidMount=function(){i.eventEmitter.on("resize",this.onResize),i.eventEmitter.on("update-annotations",this.onUpdateAnnotations),i.eventEmitter.on("place-default-annotation",this.onPlaceDefaultAnnotation),i.eventEmitter.on("hide-annotation",this.handleHideAnnotation),i.eventEmitter.on("zoom-in",this.clearDraftAnnotationWithSignal),i.eventEmitter.on("zoom-out",this.clearDraftAnnotationWithSignal),o.default("esc","fileviewer",this.escKey)},t.prototype.componentWillUnmount=function(){i.eventEmitter.off("resize",this.onResize),i.eventEmitter.off("update-annotations",this.onUpdateAnnotations),i.eventEmitter.off("place-default-annotation",this.onPlaceDefaultAnnotation),i.eventEmitter.off("hide-annotation",this.handleHideAnnotation),i.eventEmitter.off("zoom-in",this.clearDraftAnnotationWithSignal),i.eventEmitter.off("zoom-out",this.clearDraftAnnotationWithSignal),o.default.unbind("esc","fileviewer",this.escKey)},Object.defineProperty(t.prototype,"scaledWidth",{get:function(){var e=this.props,t=e.width,n=e.scaleFactor;return t*(void 0===n?1:n)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scaledHeight",{get:function(){var e=this.props,t=e.height,n=e.scaleFactor;return t*(void 0===n?1:n)},enumerable:!0,configurable:!0}),t.prototype.finalizeAnnotation=function(e){return e.pdf_coordinates=s.transformViewportCoordinates(this.props.pageNumber,this.props.parentOffset.left,this.props.parentOffset.top,this.props.width,this.props.height,this.props.scaleFactor,e.viewportCoordinates),e.pdf_page={rotate:0,view:{}},e},t.prototype.render=function(){return a.default.createElement("div",{"data-draft-annotation-exists":this.state.draftAnnotationExists,className:"db-annotation-creation-layer"},a.default.createElement(l.default,n.__assign({ref:this.onRefAnnotationController},r.pick(this.props,"disableTinyAnnotationRegions","isAnnotationCreationEnabled","isAnnotationHighlightEnabled","isAnnotationRegionEnabled"),{parentContainerOffset:this.props.parentOffset,creationLayerWidth:this.scaledWidth,creationLayerHeight:this.scaledHeight,controllerEventHandlers:this.props.delegate,onAnnotationHiddenCallback:this.onAnnotationHiddenCallback,onAnnotationRegionStart:this.onAnnotationRegionStart,onAnnotationPlacedCallback:this.onAnnotationPlacedCallback,onAnnotationStartDragCallback:this.onAnnotationStartDragCallback,onAnnotationEndDragCallback:this.onAnnotationEndDragCallback,onAnnotationScrollCallback:this.onAnnotationScrollCallback,onAnnotationScaleChangeCallback:this.onAnnotationScaleChangeCallback,onAnnotationEnterCallback:this.onAnnotationEnterCallback,onAnnotationLeaveCallback:this.onAnnotationLeaveCallback,draftAnnotationVersion:this.state.draftAnnotationVersion})))},t.defaultProps={scaleFactor:1},t})(a.default.Component);t.AnnotationCreationLayer=c}),define("modules/clean/react/previews/pdf_viewer/annotation_view_layer",["require","exports","tslib","jquery","react","external/classnames","external/react-dom","external/lodash","modules/clean/annotations/annotation","modules/clean/annotations/annotation_highlight_ui","modules/clean/annotations/annotation_region_ui","modules/clean/react/previews/pdf_viewer/transform","modules/clean/react/previews/pdf_viewer/event_emitter","modules/clean/react/css","modules/clean/react/comments2/position_utils"],function(e,t,n,o,r,a,i,s,l,d,c,p,u,f,g){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importDefault(o),r=n.__importDefault(r),a=n.__importDefault(a),i=n.__importStar(i),s=n.__importStar(s),d=n.__importDefault(d),c=n.__importDefault(c);var m=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderedAnnotations={},t.state={},t.onClick=function(e){t.props.frameMessenger.postMessageToParent("annotation-ui-click",{rankedActivityKeys:t.getRankedActivityKeysFromMouseEvent(e)})},t.onAnnotationClickCallback=function(e){t.props.frameMessenger.postMessageToParent("annotation-ui-click",{annotation:e.annotation,commentActivity:e.commentActivity})},t.onAnnotationEnterCallback=function(e){t.props.frameMessenger.postMessageToParent("annotation-ui-enter",{annotation:e.annotation,commentActivity:e.commentActivity})},t.onAnnotationLeaveCallback=function(e,n){if(t.props.useOverlappingHover)return void t.updateHoverOnMouseEvent(n);t.props.frameMessenger.postMessageToParent("annotation-ui-leave",{annotation:e.annotation,commentActivity:e.commentActivity})},t.clearCachedAnnotationClientRects=function(){t.getBoundingClientRectForActivityKey.cache.clear()},t.getBoundingClientRectForActivityKey=s.memoize(function(e){var n=t.renderedAnnotations[e];if(!n)throw new Error("no annotation for activityKey: "+e);return g.getBoundingClientRectOfRects(Array.from(n.children).map(function(e){return e.getBoundingClientRect()}))}),t.updateHoverOnMouseEvent=function(e){e.persist(),t.updateHoverOnMouseEventThrottled(e)},t.updateHoverOnMouseEventThrottled=s.throttle(function(e){var n=t.getRankedActivityKeysFromMouseEvent(e);if(!n.length)return void t.props.frameMessenger.postMessageToParent("annotation-ui-leave",{});var o=n[0];t.props.frameMessenger.postMessageToParent("annotation-ui-enter",{commentActivity:{activity_key:o}})},150),t.onScroll=function(){t.clearCachedAnnotationClientRects()},t.onFocusAnnotation=function(e){var n=e.id;t.setState({focusedAnnotationId:n})},t.onHoverAnnotation=function(e){var n=e.id;t.setState({emphasizedAnnotationId:n})},t.onHighlightAnnotation=function(e){var n=e.activity_key,r=t.renderedAnnotations[n];if(r){var a=!1;if(!t.isElementVisible(n)){a=!0;var i=o.default(".page-container"),s=o.default(r.firstChild);i.animate({scrollTop:i.scrollTop()+s.offset().top-300+"px"},300)}r.classList.remove("start-highlight-animation"),r.classList.remove("start-highlight-animation--delay"),requestAnimationFrame(function(){r.classList.add("start-highlight-animation"),a&&r.classList.add("start-highlight-animation--delay")})}},t}return n.__extends(t,e),t.prototype.componentDidMount=function(){u.eventEmitter.on("highlight-annotation",this.onHighlightAnnotation),u.eventEmitter.on("focus-annotation",this.onFocusAnnotation),u.eventEmitter.on("hover-annotation",this.onHoverAnnotation),u.eventEmitter.on("scroll",this.onScroll),u.eventEmitter.on("zoom-in",this.clearCachedAnnotationClientRects),u.eventEmitter.on("zoom-out",this.clearCachedAnnotationClientRects),window.addEventListener("resize",this.clearCachedAnnotationClientRects),this.addEventListeners(this.props.pageEl)},t.prototype.componentDidUpdate=function(e){var t=this.props,n=t.pageEl,o=t.useOverlappingHover;e.pageEl===n&&o===e.useOverlappingHover||(this.removeEventListeners(e.pageEl),this.addEventListeners(n)),this.props.annotations.length!==e.annotations.length&&this.clearCachedAnnotationClientRects()},t.prototype.componentWillUnmount=function(){u.eventEmitter.off("highlight-annotation",this.onHighlightAnnotation),u.eventEmitter.off("focus-annotation",this.onFocusAnnotation),u.eventEmitter.off("hover-annotation",this.onHoverAnnotation),u.eventEmitter.off("scroll",this.onScroll),u.eventEmitter.off("zoom-in",this.clearCachedAnnotationClientRects),u.eventEmitter.off("zoom-out",this.clearCachedAnnotationClientRects),window.removeEventListener("resize",this.clearCachedAnnotationClientRects),this.removeEventListeners(this.props.pageEl),this.renderedAnnotations={}},t.prototype.addEventListeners=function(e){this.props.useOverlappingHover&&e&&(e.addEventListener("mousemove",this.updateHoverOnMouseEventThrottled),e.addEventListener("click",this.onClick))},t.prototype.removeEventListeners=function(e){e&&(e.removeEventListener("mousemove",this.updateHoverOnMouseEventThrottled),e.removeEventListener("click",this.onClick))},t.prototype.isElementVisible=function(e){var t=this.renderedAnnotations[e];if(!t)return!1;var n=o.default(".page-container"),r=o.default(t.firstChild),a=r.offset().top;return 0<a&&a<n.height()},t.prototype.getRankedActivityKeysFromMouseEvent=function(e){var t=this,n=s.mapValues(this.renderedAnnotations,function(e,n){return t.getBoundingClientRectForActivityKey(n)});return g.getRankedElementsForMousePosition(e,n,200)},t.prototype.render=function(){var e=this,t=null;this.props.annotations&&(t=this.props.annotations.map(function(t,o){var a=l.Annotation.createAnnotationFromDict(t.annotation);a.viewportCoordinates=p.transformPdfCoordinates(0,e.props.height,t.annotation.pdf_coordinates);var s=t.commentActivity.activity_key,u=e.props.useOverlappingHover?{}:{onAnnotationEnterCallback:e.onAnnotationEnterCallback,onAnnotationClickCallback:e.onAnnotationClickCallback},f=n.__assign({key:s,annotation:a,isEmphasized:e.state.focusedAnnotationId===s||e.state.emphasizedAnnotationId===s,scaleFactor:e.props.scaleFactor||1,commentActivity:t.commentActivity,options:t.options,ref:function(n){n&&(e.renderedAnnotations[t.commentActivity.activity_key]=i.findDOMNode(n))},onAnnotationLeaveCallback:e.onAnnotationLeaveCallback},u);return a.type===l.AnnotationTypes.HIGHLIGHT?r.default.createElement(d.default,n.__assign({},f)):a.type===l.AnnotationTypes.REGION?r.default.createElement(c.default,n.__assign({},f)):null}));var o=a.default({"db-annotation-layer":!0,"db-annotation-view-layer":!0,"annotation-is-emphasized":!!this.state.emphasizedAnnotationId||!!this.state.focusedAnnotationId});return r.default.createElement("div",{className:o},t)},t.defaultProps={scaleFactor:1},t})(r.default.PureComponent),h=["/static/css/comments_annotations-vflhvjxUZ.css"],v=f.requireCssWithComponent(m,h);t.AnnotationViewLayer=v}),define("modules/clean/react/previews/pdf_viewer/event_emitter",["require","exports","tslib","external/eventemitter3"],function(e,t,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importDefault(o),t.eventEmitter=new o.default}),define("modules/clean/react/previews/pdf_viewer/font",["require","exports"],function(e,t){"use strict";function n(e){var t=e.n.lastIndexOf(",");return{fontFamily:'"'+(t>-1?e.n.substr(0,t):e.n)+'", '+(1&e.f?"monospace":"serif"),isBold:(e.f&1<<18)>0,isItalic:(64&e.f)>0}}Object.defineProperty(t,"__esModule",{value:!0});t.renderFont=n}),define("modules/clean/react/previews/pdf_viewer/frame_messenger",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FRAME_MESSAGES_FROM_PARENT=["open-file","page-up","page-down","set-current-page","file-feedback-ui-ready","update-annotations","focus-annotation","hover-annotation","enable-annotation-creation","disable-annotation-creation","enable-region-creation","disable-region-creation","zoom-in","zoom-out","print","remove-all-annotations","scroll-to-annotation","clear-annotation-selection","request-doc-metadata","place-default-annotation","hide-annotation"],t.WT_EVENT_PAGE_RENDERED="page-rendered"}),define("modules/clean/react/previews/pdf_viewer/frame_messenger_shims",["require","exports","tslib","external/eventemitter3","modules/clean/frame_messenger/frame_messenger_client","modules/clean/frame_messenger/frame_messenger_host"],function(e,t,n,o,r,a){"use strict";function i(){return{parentEmitter:new o.default,childEmitter:new o.default}}Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importDefault(o);t.makeChannel=i;var s=(function(e){function t(t){var n=e.call(this,[])||this;return n.eventListener=function(e){n.validActions.indexOf(e.action)>-1&&n.handler(e)},n.channel=t,n}return n.__extends(t,e),t.prototype.configureChildMessaging=function(e,t,n){this.handler=t,this.validActions=n},t.prototype.startListening=function(){this.channel.childEmitter.on("message",this.eventListener)},t.prototype.stopListening=function(){this.channel.childEmitter.off("message",this.eventListener)},t.prototype.postMessageToChildren=function(e,t){void 0===t&&(t={}),this.channel.parentEmitter.emit("message",{action:e,parameters:t})},t})(a.FrameMessengerHost);t.FrameMessengerHostShim=s;var l=(function(e){function t(t){var n=e.call(this,[])||this;return n.eventListener=function(e){n.validActions.indexOf(e.action)>-1&&n.handler(e)},n.channel=t,n}return n.__extends(t,e),t.prototype.configureParentMessaging=function(e,t,n){void 0===n&&(n=null),this.validActions=t,this.handler=e},t.prototype.postMessageToParent=function(e,t){void 0===t&&(t={}),this.channel.childEmitter.emit("message",{action:e,parameters:t})},t.prototype.startListening=function(){this.channel.parentEmitter.on("message",this.eventListener)},t.prototype.stopListening=function(){this.channel.parentEmitter.off("message",this.eventListener)},t})(r.FrameMessengerClient);t.FrameMessengerClientShim=l}),define("modules/clean/react/previews/pdf_viewer/keyboard_bindings",["require","exports","modules/clean/react/keyboard_binding/keyboard_binding","modules/clean/keycode"],function(e,t,n,o){"use strict";function r(e){var r=e.pageUp,a=e.pageDown,i=e.zoomIn,s=e.zoomOut,l=e.print;return[n.hydrateKeyboardBinding({keyboardEventCriteria:{altKey:!1,which:o.KeyCode.SPACE},callback:a})].concat(t.getPageUpPageDownKeyboardBindings(r,a),t.getUpDownKeyboardBindings(r,a),t.getLeftRightKeyboardBindings(r,a),n.getEqualsKeyBindings(i),n.getMinusKeyBindings(s),n.getPrintKeyBindings(l))}function a(e){var r=e.isFullScreen,a=e.keyUp,i=e.keyDown,s=e.pageUp,l=e.pageDown,d=e.zoomIn,c=e.zoomOut,p=e.print,u=r?t.getUpDownKeyboardBindings(s,l):t.getUpDownKeyboardBindings(a,i),f=n.hydrateKeyboardBinding({keyboardEventCriteria:{altKey:!0,which:o.KeyCode.UP},callback:s}),g=n.hydrateKeyboardBinding({keyboardEventCriteria:{altKey:!0,which:o.KeyCode.DOWN},callback:l}),m=n.hydrateKeyboardBinding({keyboardEventCriteria:{altKey:!1,which:o.KeyCode.SPACE},callback:l}),h=r?t.getLeftRightKeyboardBindings(s,l).slice():[];return u.concat([f,g,m],t.getPageUpPageDownKeyboardBindings(s,l),h,n.getEqualsKeyBindings(d),n.getMinusKeyBindings(c),n.getPrintKeyBindings(p))}Object.defineProperty(t,"__esModule",{value:!0}),t.getLeftRightKeyboardBindings=function(e,t){return[n.hydrateKeyboardBinding({keyboardEventCriteria:{which:o.KeyCode.LEFT},callback:e}),n.hydrateKeyboardBinding({keyboardEventCriteria:{which:o.KeyCode.RIGHT},callback:t})]},t.getUpDownKeyboardBindings=function(e,t){return[n.hydrateKeyboardBinding({keyboardEventCriteria:{which:o.KeyCode.UP},callback:e}),n.hydrateKeyboardBinding({keyboardEventCriteria:{which:o.KeyCode.DOWN},callback:t})]},t.getPageUpPageDownKeyboardBindings=function(e,t){return[n.hydrateKeyboardBinding({keyboardEventCriteria:{which:o.KeyCode.PAGE_UP},callback:e}),n.hydrateKeyboardBinding({keyboardEventCriteria:{which:o.KeyCode.PAGE_DOWN},callback:t})]},t.getSinglePageKeyboardBindings=r,t.getContinuousPageKeyboardBindings=a}),define("modules/clean/react/previews/pdf_viewer/layers",["require","exports","tslib","react","modules/clean/react/previews/pdf_viewer/annotation_creation_layer","file-viewer/preview_doc","modules/clean/react/comments2/components/annotations/loadable","modules/clean/react/previews/pdf_viewer/annotation_view_layer","modules/clean/referrer_cleansing_redirect","modules/clean/react/comments2/data/types","file-viewer/preview_doc"],function(e,t,n,o,r,a,i,s,l,d,c){"use strict";function p(e){return void 0===e&&(e=[]),e.map(function(e){return e.a&&c.isLinkUrl(e.a)&&!e.a.ur.startsWith("mailto:")?n.__assign({},e,{a:n.__assign({},e.a,{ur:l.get_redirect_uri(a.normalizeUrl(e.a.ur)).toString()})}):e})}Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importDefault(o),l=n.__importStar(l),t._cleanseLinks=p,t.generateLayers=function(e){return function(t){var l=e.config.load_image_only,c=e.filePreviewUiData.scaleFactor,p=void 0===c?0:c,u=t.legacyProps,f=u.comments2AnnotationsEnabled,g=u.annotationProps,m=u.annotationCreationDelegate,h=u.pageEl,v=u.offset,b=t.isFocused,_=t.data,w=_.dimension,P=_.pageIndex,y=f===d.Comments2AnnotationsMode.SpectrumComponents,M={width:w[0]*p,height:w[1]*p},A=[o.default.createElement("div",{className:"c-loader",key:"loader"})],E=P+1;if(g&&!y){A.push(o.default.createElement(s.AnnotationViewLayer,{key:"legacyAnnotationViewLayer",annotations:g.annotations||[],page:E,width:w[0],height:w[1],scaleFactor:p,frameMessenger:g.frameMessenger,useOverlappingHover:!1,pageEl:h}));var S=g.isAnnotationCreationEnabled;S&&A.push(o.default.createElement(r.AnnotationCreationLayer,{key:"annotationCreationLayer",pageNumber:E,width:w[0],height:w[1],scaleFactor:p,parentOffset:v,delegate:m,frameMessenger:g.frameMessenger,isAnnotationCreationEnabled:S,isAnnotationHighlightEnabled:g.isAnnotationHighlightEnabled,isAnnotationRegionEnabled:g.isAnnotationRegionEnabled,disableTinyAnnotationRegions:!1,isFocusedPage:b}))}A.push(o.default.createElement(a.ImgLayer,n.__assign({},e,t,{legacyProps:void 0,key:"imgLayer"})));var L=null,C=null;return l||(L=o.default.createElement(a.TextLayer,n.__assign({},e,t,{legacyProps:void 0,key:"textLayer"})),C=o.default.createElement(a.LinksLayer,n.__assign({},e,t,{legacyProps:void 0,key:"linksLayer"}))),y||A.push(L,C),y&&A.push(o.default.createElement(i.AnnotationViewLayer,{key:"annotationViewLayer",page:E}),o.default.createElement(i.AnnotationConductorLayer,{key:"annotationConductorLayer",page:E,layerSize:M
},o.default.createElement(i.AnnotationInstructionalTooltipPane,{layerSize:M},L,C))),A}}}),define("modules/clean/react/previews/pdf_viewer/text/bidi",["require","exports"],function(e,t){"use strict";function n(e){return 0!==(1&e)}function o(e){return 0===(1&e)}function r(e,t,n){for(var o=t,r=e.length;o<r;++o)if(e[o]!==n)return o;return o}function a(e,t,n,o){for(var r=t;r<n;++r)e[r]=o}function i(e,t,n){for(var o=t,r=n-1;o<r;++o,--r){var a=e[o];e[o]=e[r],e[r]=a}}function s(e,t,n){return{str:e,dir:n?"ttb":t?"ltr":"rtl"}}function l(e,t,l){var f=!0,g=e.length;if(0===g||l)return s(e,f,l);p.length=g,u.length=g;var m,h,v=0;for(m=0;m<g;++m){p[m]=e.charAt(m);var b=e.charCodeAt(m),_="L";b<=255?_=d[b]:1424<=b&&b<=1524?_="R":1536<=b&&b<=1791?_=c[255&b]:1792<=b&&b<=2220&&(_="AL"),"R"!==_&&"AL"!==_&&"AN"!==_||v++,u[m]=_}if(0===v)return f=!0,s(e,f);t===-1&&(v/g<.3?(f=!0,t=0):(f=!1,t=1));var w=[];for(m=0;m<g;++m)w[m]=t;var P=n(t)?"R":"L",y=P,M=y,A=y;for(m=0;m<g;++m)"NSM"===u[m]?u[m]=A:A=u[m];A=y;var E;for(m=0;m<g;++m)E=u[m],"EN"===E?u[m]="AL"===A?"AN":"EN":"R"!==E&&"L"!==E&&"AL"!==E||(A=E);for(m=0;m<g;++m)E=u[m],"AL"===E&&(u[m]="R");for(m=1;m<g-1;++m)"ES"===u[m]&&"EN"===u[m-1]&&"EN"===u[m+1]&&(u[m]="EN"),"CS"!==u[m]||"EN"!==u[m-1]&&"AN"!==u[m-1]||u[m+1]!==u[m-1]||(u[m]=u[m-1]);for(m=0;m<g;++m)if("EN"===u[m]){var S;for(S=m-1;S>=0&&"ET"===u[S];--S)u[S]="EN";for(S=m+1;S<g&&"ET"===u[S];++S)u[S]="EN"}for(m=0;m<g;++m)E=u[m],"WS"!==E&&"ES"!==E&&"ET"!==E&&"CS"!==E||(u[m]="ON");for(A=y,m=0;m<g;++m)E=u[m],"EN"===E?u[m]="L"===A?"L":"EN":"R"!==E&&"L"!==E||(A=E);for(m=0;m<g;++m)if("ON"===u[m]){var L=r(u,m+1,"ON"),C=y;m>0&&(C=u[m-1]);var x=M;L+1<g&&(x=u[L+1]),"L"!==C&&(C="R"),"L"!==x&&(x="R"),C===x&&a(u,m,L,C),m=L-1}for(m=0;m<g;++m)"ON"===u[m]&&(u[m]=P);for(m=0;m<g;++m)E=u[m],o(w[m])?"R"===E?w[m]+=1:"AN"!==E&&"EN"!==E||(w[m]+=2):"L"!==E&&"AN"!==E&&"EN"!==E||(w[m]+=1);var I,N=-1,D=99;for(m=0,h=w.length;m<h;++m)I=w[m],N<I&&(N=I),D>I&&n(I)&&(D=I);for(I=N;I>=D;--I){var T=-1;for(m=0,h=w.length;m<h;++m)w[m]<I?T>=0&&(i(p,T,m),T=-1):T<0&&(T=m);T>=0&&i(p,T,w.length)}for(m=0,h=p.length;m<h;++m){var O=p[m];"<"!==O&&">"!==O||(p[m]="")}return s(p.join(""),f)}Object.defineProperty(t,"__esModule",{value:!0});var d=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","ON","ON","ET","ET","ET","ON","ON","ON","ON","ON","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","ON","ON","ON","ON","ON","ON","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","ON","ON","ON","ON","ON","ON","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","ON","ON","ON","ON","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","ON","ET","ET","ET","ET","ON","ON","ON","ON","L","ON","ON","BN","ON","ON","ET","ET","EN","EN","ON","L","ON","ON","ON","EN","L","ON","ON","ON","ON","ON","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","ON","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","ON","L","L","L","L","L","L","L","L"],c=["AN","AN","AN","AN","AN","AN","ON","ON","AL","ET","ET","AL","CS","AL","ON","ON","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","ON","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","ON","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL"],p=[],u=[];t.bidi=l}),define("modules/clean/react/previews/pdf_viewer/text/unicode",["require","exports"],function(e,t){"use strict";function n(e){var t;return function(){return e&&(t=Object.create(null),e(t),e=null),t}}function o(e){var t=a[13];return e>=t.begin&&e<t.end||(t=a[11],e>=t.begin&&e<t.end)}function r(e){var t=e.length;if(t<=1||!o(e.charCodeAt(0)))return e;for(var n="",r=t-1;r>=0;r--)n+=e[r];return n}Object.defineProperty(t,"__esModule",{value:!0});var a=(n(function(e){e[63721]=169,e[63193]=169,e[63720]=174,e[63194]=174,e[63722]=8482,e[63195]=8482,e[63729]=9127,e[63730]=9128,e[63731]=9129,e[63740]=9131,e[63741]=9132,e[63742]=9133,e[63726]=9121,e[63727]=9122,e[63728]=9123,e[63737]=9124,e[63738]=9125,e[63739]=9126,e[63723]=9115,e[63724]=9116,e[63725]=9117,e[63734]=9118,e[63735]=9119,e[63736]=9120}),[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}]);t.getNormalizedUnicodes=n(function(e){e["¨"]=" ̈",e["¯"]=" ̄",e["´"]=" ́",e["µ"]="μ",e["¸"]=" ̧",e["Ĳ"]="IJ",e["ĳ"]="ij",e["Ŀ"]="L·",e["ŀ"]="l·",e["ŉ"]="ʼn",e["ſ"]="s",e["Ǆ"]="DŽ",e["ǅ"]="Dž",e["ǆ"]="dž",e["Ǉ"]="LJ",e["ǈ"]="Lj",e["ǉ"]="lj",e["Ǌ"]="NJ",e["ǋ"]="Nj",e["ǌ"]="nj",e["Ǳ"]="DZ",e["ǲ"]="Dz",e["ǳ"]="dz",e["˘"]=" ̆",e["˙"]=" ̇",e["˚"]=" ̊",e["˛"]=" ̨",e["˜"]=" ̃",e["˝"]=" ̋",e["ͺ"]=" ͅ",e["΄"]=" ́",e["ϐ"]="β",e["ϑ"]="θ",e["ϒ"]="Υ",e["ϕ"]="φ",e["ϖ"]="π",e["ϰ"]="κ",e["ϱ"]="ρ",e["ϲ"]="ς",e["ϴ"]="Θ",e["ϵ"]="ε",e["Ϲ"]="Σ",e["և"]="եւ",e["ٵ"]="اٴ",e["ٶ"]="وٴ",e["ٷ"]="ۇٴ",e["ٸ"]="يٴ",e["ำ"]="ํา",e["ຳ"]="ໍາ",e["ໜ"]="ຫນ",e["ໝ"]="ຫມ",e["ཷ"]="ྲཱྀ",e["ཹ"]="ླཱྀ",e["ẚ"]="aʾ",e["᾽"]=" ̓",e["᾿"]=" ̓",e["῀"]=" ͂",e["῾"]=" ̔",e[" "]=" ",e[" "]=" ",e[" "]=" ",e[" "]=" ",e[" "]=" ",e[" "]=" ",e[" "]=" ",e[" "]=" ",e["‗"]=" ̳",e["․"]=".",e["‥"]="..",e["…"]="...",e["″"]="′′",e["‴"]="′′′",e["‶"]="‵‵",e["‷"]="‵‵‵",e["‼"]="!!",e["‾"]=" ̅",e["⁇"]="??",e["⁈"]="?!",e["⁉"]="!?",e["⁗"]="′′′′",e[" "]=" ",e["₨"]="Rs",e["℀"]="a/c",e["℁"]="a/s",e["℃"]="°C",e["℅"]="c/o",e["℆"]="c/u",e["ℇ"]="Ɛ",e["℉"]="°F",e["№"]="No",e["℡"]="TEL",e["ℵ"]="א",e["ℶ"]="ב",e["ℷ"]="ג",e["ℸ"]="ד",e["℻"]="FAX",e["Ⅰ"]="I",e["Ⅱ"]="II",e["Ⅲ"]="III",e["Ⅳ"]="IV",e["Ⅴ"]="V",e["Ⅵ"]="VI",e["Ⅶ"]="VII",e["Ⅷ"]="VIII",e["Ⅸ"]="IX",e["Ⅹ"]="X",e["Ⅺ"]="XI",e["Ⅻ"]="XII",e["Ⅼ"]="L",e["Ⅽ"]="C",e["Ⅾ"]="D",e["Ⅿ"]="M",e["ⅰ"]="i",e["ⅱ"]="ii",e["ⅲ"]="iii",e["ⅳ"]="iv",e["ⅴ"]="v",e["ⅵ"]="vi",e["ⅶ"]="vii",e["ⅷ"]="viii",e["ⅸ"]="ix",e["ⅹ"]="x",e["ⅺ"]="xi",e["ⅻ"]="xii",e["ⅼ"]="l",e["ⅽ"]="c",e["ⅾ"]="d",e["ⅿ"]="m",e["∬"]="∫∫",e["∭"]="∫∫∫",e["∯"]="∮∮",e["∰"]="∮∮∮",e["⑴"]="(1)",e["⑵"]="(2)",e["⑶"]="(3)",e["⑷"]="(4)",e["⑸"]="(5)",e["⑹"]="(6)",e["⑺"]="(7)",e["⑻"]="(8)",e["⑼"]="(9)",e["⑽"]="(10)",e["⑾"]="(11)",e["⑿"]="(12)",e["⒀"]="(13)",e["⒁"]="(14)",e["⒂"]="(15)",e["⒃"]="(16)",e["⒄"]="(17)",e["⒅"]="(18)",e["⒆"]="(19)",e["⒇"]="(20)",e["⒈"]="1.",e["⒉"]="2.",e["⒊"]="3.",e["⒋"]="4.",e["⒌"]="5.",e["⒍"]="6.",e["⒎"]="7.",e["⒏"]="8.",e["⒐"]="9.",e["⒑"]="10.",e["⒒"]="11.",e["⒓"]="12.",e["⒔"]="13.",e["⒕"]="14.",e["⒖"]="15.",e["⒗"]="16.",e["⒘"]="17.",e["⒙"]="18.",e["⒚"]="19.",e["⒛"]="20.",e["⒜"]="(a)",e["⒝"]="(b)",e["⒞"]="(c)",e["⒟"]="(d)",e["⒠"]="(e)",e["⒡"]="(f)",e["⒢"]="(g)",e["⒣"]="(h)",e["⒤"]="(i)",e["⒥"]="(j)",e["⒦"]="(k)",e["⒧"]="(l)",e["⒨"]="(m)",e["⒩"]="(n)",e["⒪"]="(o)",e["⒫"]="(p)",e["⒬"]="(q)",e["⒭"]="(r)",e["⒮"]="(s)",e["⒯"]="(t)",e["⒰"]="(u)",e["⒱"]="(v)",e["⒲"]="(w)",e["⒳"]="(x)",e["⒴"]="(y)",e["⒵"]="(z)",e["⨌"]="∫∫∫∫",e["⩴"]="::=";e["⩵"]="==",e["⩶"]="===",e["⺟"]="母",e["⻳"]="龟",e["⼀"]="一",e["⼁"]="丨",e["⼂"]="丶",e["⼃"]="丿",e["⼄"]="乙",e["⼅"]="亅",e["⼆"]="二",e["⼇"]="亠",e["⼈"]="人",e["⼉"]="儿",e["⼊"]="入",e["⼋"]="八",e["⼌"]="冂",e["⼍"]="冖",e["⼎"]="冫",e["⼏"]="几",e["⼐"]="凵",e["⼑"]="刀",e["⼒"]="力",e["⼓"]="勹",e["⼔"]="匕",e["⼕"]="匚",e["⼖"]="匸",e["⼗"]="十",e["⼘"]="卜",e["⼙"]="卩",e["⼚"]="厂",e["⼛"]="厶",e["⼜"]="又",e["⼝"]="口",e["⼞"]="囗",e["⼟"]="土",e["⼠"]="士",e["⼡"]="夂",e["⼢"]="夊",e["⼣"]="夕",e["⼤"]="大",e["⼥"]="女",e["⼦"]="子",e["⼧"]="宀",e["⼨"]="寸",e["⼩"]="小",e["⼪"]="尢",e["⼫"]="尸",e["⼬"]="屮",e["⼭"]="山",e["⼮"]="巛",e["⼯"]="工",e["⼰"]="己",e["⼱"]="巾",e["⼲"]="干",e["⼳"]="幺",e["⼴"]="广",e["⼵"]="廴",e["⼶"]="廾",e["⼷"]="弋",e["⼸"]="弓",e["⼹"]="彐",e["⼺"]="彡",e["⼻"]="彳",e["⼼"]="心",e["⼽"]="戈",e["⼾"]="戶",e["⼿"]="手",e["⽀"]="支",e["⽁"]="攴",e["⽂"]="文",e["⽃"]="斗",e["⽄"]="斤",e["⽅"]="方",e["⽆"]="无",e["⽇"]="日",e["⽈"]="曰",e["⽉"]="月",e["⽊"]="木",e["⽋"]="欠",e["⽌"]="止",e["⽍"]="歹",e["⽎"]="殳",e["⽏"]="毋",e["⽐"]="比",e["⽑"]="毛",e["⽒"]="氏",e["⽓"]="气",e["⽔"]="水",e["⽕"]="火",e["⽖"]="爪",e["⽗"]="父",e["⽘"]="爻",e["⽙"]="爿",e["⽚"]="片",e["⽛"]="牙",e["⽜"]="牛",e["⽝"]="犬",e["⽞"]="玄",e["⽟"]="玉",e["⽠"]="瓜",e["⽡"]="瓦",e["⽢"]="甘",e["⽣"]="生",e["⽤"]="用",e["⽥"]="田",e["⽦"]="疋",e["⽧"]="疒",e["⽨"]="癶",e["⽩"]="白",e["⽪"]="皮",e["⽫"]="皿",e["⽬"]="目",e["⽭"]="矛",e["⽮"]="矢",e["⽯"]="石",e["⽰"]="示",e["⽱"]="禸",e["⽲"]="禾",e["⽳"]="穴",e["⽴"]="立",e["⽵"]="竹",e["⽶"]="米",e["⽷"]="糸",e["⽸"]="缶",e["⽹"]="网",e["⽺"]="羊",e["⽻"]="羽",e["⽼"]="老",e["⽽"]="而",e["⽾"]="耒",e["⽿"]="耳",e["⾀"]="聿",e["⾁"]="肉",e["⾂"]="臣",e["⾃"]="自",e["⾄"]="至",e["⾅"]="臼",e["⾆"]="舌",e["⾇"]="舛",e["⾈"]="舟",e["⾉"]="艮",e["⾊"]="色",e["⾋"]="艸",e["⾌"]="虍",e["⾍"]="虫",e["⾎"]="血",e["⾏"]="行",e["⾐"]="衣",e["⾑"]="襾",e["⾒"]="見",e["⾓"]="角",e["⾔"]="言",e["⾕"]="谷",e["⾖"]="豆",e["⾗"]="豕",e["⾘"]="豸",e["⾙"]="貝",e["⾚"]="赤",e["⾛"]="走",e["⾜"]="足",e["⾝"]="身",e["⾞"]="車",e["⾟"]="辛",e["⾠"]="辰",e["⾡"]="辵",e["⾢"]="邑",e["⾣"]="酉",e["⾤"]="釆",e["⾥"]="里",e["⾦"]="金",e["⾧"]="長",e["⾨"]="門",e["⾩"]="阜",e["⾪"]="隶",e["⾫"]="隹",e["⾬"]="雨",e["⾭"]="靑",e["⾮"]="非",e["⾯"]="面",e["⾰"]="革",e["⾱"]="韋",e["⾲"]="韭",e["⾳"]="音",e["⾴"]="頁",e["⾵"]="風",e["⾶"]="飛",e["⾷"]="食",e["⾸"]="首",e["⾹"]="香",e["⾺"]="馬",e["⾻"]="骨",e["⾼"]="高",e["⾽"]="髟",e["⾾"]="鬥",e["⾿"]="鬯",e["⿀"]="鬲",e["⿁"]="鬼",e["⿂"]="魚",e["⿃"]="鳥";e["⿄"]="鹵",e["⿅"]="鹿",e["⿆"]="麥",e["⿇"]="麻",e["⿈"]="黃",e["⿉"]="黍",e["⿊"]="黑",e["⿋"]="黹",e["⿌"]="黽",e["⿍"]="鼎",e["⿎"]="鼓",e["⿏"]="鼠",e["⿐"]="鼻",e["⿑"]="齊",e["⿒"]="齒",e["⿓"]="龍",e["⿔"]="龜",e["⿕"]="龠",e["〶"]="〒",e["〸"]="十",e["〹"]="卄",e["〺"]="卅",e["゛"]=" ゙",e["゜"]=" ゚",e["ㄱ"]="ᄀ",e["ㄲ"]="ᄁ",e["ㄳ"]="ᆪ",e["ㄴ"]="ᄂ",e["ㄵ"]="ᆬ",e["ㄶ"]="ᆭ",e["ㄷ"]="ᄃ",e["ㄸ"]="ᄄ",e["ㄹ"]="ᄅ",e["ㄺ"]="ᆰ",e["ㄻ"]="ᆱ",e["ㄼ"]="ᆲ",e["ㄽ"]="ᆳ",e["ㄾ"]="ᆴ",e["ㄿ"]="ᆵ",e["ㅀ"]="ᄚ",e["ㅁ"]="ᄆ",e["ㅂ"]="ᄇ",e["ㅃ"]="ᄈ",e["ㅄ"]="ᄡ",e["ㅅ"]="ᄉ",e["ㅆ"]="ᄊ",e["ㅇ"]="ᄋ",e["ㅈ"]="ᄌ",e["ㅉ"]="ᄍ",e["ㅊ"]="ᄎ",e["ㅋ"]="ᄏ",e["ㅌ"]="ᄐ",e["ㅍ"]="ᄑ",e["ㅎ"]="ᄒ",e["ㅏ"]="ᅡ",e["ㅐ"]="ᅢ",e["ㅑ"]="ᅣ",e["ㅒ"]="ᅤ",e["ㅓ"]="ᅥ",e["ㅔ"]="ᅦ",e["ㅕ"]="ᅧ",e["ㅖ"]="ᅨ",e["ㅗ"]="ᅩ",e["ㅘ"]="ᅪ",e["ㅙ"]="ᅫ",e["ㅚ"]="ᅬ",e["ㅛ"]="ᅭ",e["ㅜ"]="ᅮ",e["ㅝ"]="ᅯ",e["ㅞ"]="ᅰ",e["ㅟ"]="ᅱ",e["ㅠ"]="ᅲ",e["ㅡ"]="ᅳ",e["ㅢ"]="ᅴ",e["ㅣ"]="ᅵ",e["ㅤ"]="ᅠ",e["ㅥ"]="ᄔ",e["ㅦ"]="ᄕ",e["ㅧ"]="ᇇ",e["ㅨ"]="ᇈ",e["ㅩ"]="ᇌ",e["ㅪ"]="ᇎ",e["ㅫ"]="ᇓ",e["ㅬ"]="ᇗ",e["ㅭ"]="ᇙ",e["ㅮ"]="ᄜ",e["ㅯ"]="ᇝ",e["ㅰ"]="ᇟ",e["ㅱ"]="ᄝ",e["ㅲ"]="ᄞ",e["ㅳ"]="ᄠ",e["ㅴ"]="ᄢ",e["ㅵ"]="ᄣ",e["ㅶ"]="ᄧ",e["ㅷ"]="ᄩ",e["ㅸ"]="ᄫ",e["ㅹ"]="ᄬ",e["ㅺ"]="ᄭ",e["ㅻ"]="ᄮ",e["ㅼ"]="ᄯ",e["ㅽ"]="ᄲ",e["ㅾ"]="ᄶ",e["ㅿ"]="ᅀ",e["ㆀ"]="ᅇ",e["ㆁ"]="ᅌ",e["ㆂ"]="ᇱ",e["ㆃ"]="ᇲ",e["ㆄ"]="ᅗ",e["ㆅ"]="ᅘ",e["ㆆ"]="ᅙ",e["ㆇ"]="ᆄ",e["ㆈ"]="ᆅ",e["ㆉ"]="ᆈ",e["ㆊ"]="ᆑ",e["ㆋ"]="ᆒ",e["ㆌ"]="ᆔ",e["ㆍ"]="ᆞ",e["ㆎ"]="ᆡ",e["㈀"]="(ᄀ)",e["㈁"]="(ᄂ)",e["㈂"]="(ᄃ)",e["㈃"]="(ᄅ)",e["㈄"]="(ᄆ)",e["㈅"]="(ᄇ)",e["㈆"]="(ᄉ)",e["㈇"]="(ᄋ)",e["㈈"]="(ᄌ)",e["㈉"]="(ᄎ)",e["㈊"]="(ᄏ)",e["㈋"]="(ᄐ)",e["㈌"]="(ᄑ)",e["㈍"]="(ᄒ)",e["㈎"]="(가)",e["㈏"]="(나)",e["㈐"]="(다)",e["㈑"]="(라)",e["㈒"]="(마)",e["㈓"]="(바)",e["㈔"]="(사)",e["㈕"]="(아)",e["㈖"]="(자)",e["㈗"]="(차)",e["㈘"]="(카)",e["㈙"]="(타)",e["㈚"]="(파)",e["㈛"]="(하)",e["㈜"]="(주)",e["㈝"]="(오전)",e["㈞"]="(오후)",e["㈠"]="(一)",e["㈡"]="(二)",e["㈢"]="(三)",e["㈣"]="(四)",e["㈤"]="(五)",e["㈥"]="(六)",e["㈦"]="(七)",e["㈧"]="(八)",e["㈨"]="(九)",e["㈩"]="(十)",e["㈪"]="(月)",e["㈫"]="(火)",e["㈬"]="(水)",e["㈭"]="(木)",e["㈮"]="(金)",e["㈯"]="(土)",e["㈰"]="(日)",e["㈱"]="(株)",e["㈲"]="(有)",e["㈳"]="(社)",e["㈴"]="(名)",e["㈵"]="(特)",e["㈶"]="(財)",e["㈷"]="(祝)",e["㈸"]="(労)",e["㈹"]="(代)",e["㈺"]="(呼)",e["㈻"]="(学)",e["㈼"]="(監)",e["㈽"]="(企)",e["㈾"]="(資)",e["㈿"]="(協)",e["㉀"]="(祭)",e["㉁"]="(休)",e["㉂"]="(自)",e["㉃"]="(至)",e["㋀"]="1月",e["㋁"]="2月",e["㋂"]="3月",e["㋃"]="4月",e["㋄"]="5月",e["㋅"]="6月",e["㋆"]="7月",e["㋇"]="8月",e["㋈"]="9月",e["㋉"]="10月",e["㋊"]="11月",e["㋋"]="12月",e["㍘"]="0点",e["㍙"]="1点",e["㍚"]="2点";e["㍛"]="3点",e["㍜"]="4点",e["㍝"]="5点",e["㍞"]="6点",e["㍟"]="7点",e["㍠"]="8点",e["㍡"]="9点",e["㍢"]="10点",e["㍣"]="11点",e["㍤"]="12点",e["㍥"]="13点",e["㍦"]="14点",e["㍧"]="15点",e["㍨"]="16点",e["㍩"]="17点",e["㍪"]="18点",e["㍫"]="19点",e["㍬"]="20点",e["㍭"]="21点",e["㍮"]="22点",e["㍯"]="23点",e["㍰"]="24点",e["㏠"]="1日",e["㏡"]="2日",e["㏢"]="3日",e["㏣"]="4日",e["㏤"]="5日",e["㏥"]="6日",e["㏦"]="7日",e["㏧"]="8日",e["㏨"]="9日",e["㏩"]="10日",e["㏪"]="11日",e["㏫"]="12日",e["㏬"]="13日",e["㏭"]="14日",e["㏮"]="15日",e["㏯"]="16日",e["㏰"]="17日",e["㏱"]="18日",e["㏲"]="19日",e["㏳"]="20日",e["㏴"]="21日",e["㏵"]="22日",e["㏶"]="23日",e["㏷"]="24日",e["㏸"]="25日",e["㏹"]="26日",e["㏺"]="27日",e["㏻"]="28日",e["㏼"]="29日",e["㏽"]="30日",e["㏾"]="31日",e["ﬀ"]="ff",e["ﬁ"]="fi",e["ﬂ"]="fl",e["ﬃ"]="ffi",e["ﬄ"]="ffl",e["ﬅ"]="ſt",e["ﬆ"]="st",e["ﬓ"]="մն",e["ﬔ"]="մե",e["ﬕ"]="մի",e["ﬖ"]="վն",e["ﬗ"]="մխ",e["ﭏ"]="אל",e["ﭐ"]="ٱ",e["ﭑ"]="ٱ",e["ﭒ"]="ٻ",e["ﭓ"]="ٻ",e["ﭔ"]="ٻ",e["ﭕ"]="ٻ",e["ﭖ"]="پ",e["ﭗ"]="پ",e["ﭘ"]="پ",e["ﭙ"]="پ",e["ﭚ"]="ڀ",e["ﭛ"]="ڀ",e["ﭜ"]="ڀ",e["ﭝ"]="ڀ",e["ﭞ"]="ٺ",e["ﭟ"]="ٺ",e["ﭠ"]="ٺ",e["ﭡ"]="ٺ",e["ﭢ"]="ٿ",e["ﭣ"]="ٿ",e["ﭤ"]="ٿ",e["ﭥ"]="ٿ",e["ﭦ"]="ٹ",e["ﭧ"]="ٹ",e["ﭨ"]="ٹ",e["ﭩ"]="ٹ",e["ﭪ"]="ڤ",e["ﭫ"]="ڤ",e["ﭬ"]="ڤ",e["ﭭ"]="ڤ",e["ﭮ"]="ڦ",e["ﭯ"]="ڦ",e["ﭰ"]="ڦ",e["ﭱ"]="ڦ",e["ﭲ"]="ڄ",e["ﭳ"]="ڄ",e["ﭴ"]="ڄ",e["ﭵ"]="ڄ",e["ﭶ"]="ڃ",e["ﭷ"]="ڃ",e["ﭸ"]="ڃ",e["ﭹ"]="ڃ",e["ﭺ"]="چ",e["ﭻ"]="چ",e["ﭼ"]="چ",e["ﭽ"]="چ",e["ﭾ"]="ڇ",e["ﭿ"]="ڇ",e["ﮀ"]="ڇ",e["ﮁ"]="ڇ",e["ﮂ"]="ڍ",e["ﮃ"]="ڍ",e["ﮄ"]="ڌ",e["ﮅ"]="ڌ",e["ﮆ"]="ڎ",e["ﮇ"]="ڎ",e["ﮈ"]="ڈ",e["ﮉ"]="ڈ",e["ﮊ"]="ژ",e["ﮋ"]="ژ",e["ﮌ"]="ڑ",e["ﮍ"]="ڑ",e["ﮎ"]="ک",e["ﮏ"]="ک",e["ﮐ"]="ک",e["ﮑ"]="ک",e["ﮒ"]="گ",e["ﮓ"]="گ",e["ﮔ"]="گ",e["ﮕ"]="گ",e["ﮖ"]="ڳ",e["ﮗ"]="ڳ",e["ﮘ"]="ڳ",e["ﮙ"]="ڳ",e["ﮚ"]="ڱ",e["ﮛ"]="ڱ",e["ﮜ"]="ڱ",e["ﮝ"]="ڱ",e["ﮞ"]="ں",e["ﮟ"]="ں",e["ﮠ"]="ڻ",e["ﮡ"]="ڻ",e["ﮢ"]="ڻ",e["ﮣ"]="ڻ",e["ﮤ"]="ۀ",e["ﮥ"]="ۀ",e["ﮦ"]="ہ",e["ﮧ"]="ہ",e["ﮨ"]="ہ",e["ﮩ"]="ہ",e["ﮪ"]="ھ",e["ﮫ"]="ھ",e["ﮬ"]="ھ",e["ﮭ"]="ھ",e["ﮮ"]="ے",e["ﮯ"]="ے",e["ﮰ"]="ۓ",e["ﮱ"]="ۓ",e["ﯓ"]="ڭ",e["ﯔ"]="ڭ",e["ﯕ"]="ڭ",e["ﯖ"]="ڭ",e["ﯗ"]="ۇ",e["ﯘ"]="ۇ",e["ﯙ"]="ۆ",e["ﯚ"]="ۆ",e["ﯛ"]="ۈ",e["ﯜ"]="ۈ",e["ﯝ"]="ٷ",e["ﯞ"]="ۋ",e["ﯟ"]="ۋ",e["ﯠ"]="ۅ",e["ﯡ"]="ۅ",e["ﯢ"]="ۉ",e["ﯣ"]="ۉ",e["ﯤ"]="ې",e["ﯥ"]="ې",e["ﯦ"]="ې",e["ﯧ"]="ې",e["ﯨ"]="ى",e["ﯩ"]="ى",e["ﯪ"]="ئا",e["ﯫ"]="ئا",e["ﯬ"]="ئە",e["ﯭ"]="ئە",e["ﯮ"]="ئو",e["ﯯ"]="ئو",e["ﯰ"]="ئۇ",e["ﯱ"]="ئۇ",e["ﯲ"]="ئۆ",e["ﯳ"]="ئۆ",e["ﯴ"]="ئۈ",e["ﯵ"]="ئۈ",e["ﯶ"]="ئې";e["ﯷ"]="ئې",e["ﯸ"]="ئې",e["ﯹ"]="ئى",e["ﯺ"]="ئى",e["ﯻ"]="ئى",e["ﯼ"]="ی",e["ﯽ"]="ی",e["ﯾ"]="ی",e["ﯿ"]="ی",e["ﰀ"]="ئج",e["ﰁ"]="ئح",e["ﰂ"]="ئم",e["ﰃ"]="ئى",e["ﰄ"]="ئي",e["ﰅ"]="بج",e["ﰆ"]="بح",e["ﰇ"]="بخ",e["ﰈ"]="بم",e["ﰉ"]="بى",e["ﰊ"]="بي",e["ﰋ"]="تج",e["ﰌ"]="تح",e["ﰍ"]="تخ",e["ﰎ"]="تم",e["ﰏ"]="تى",e["ﰐ"]="تي",e["ﰑ"]="ثج",e["ﰒ"]="ثم",e["ﰓ"]="ثى",e["ﰔ"]="ثي",e["ﰕ"]="جح",e["ﰖ"]="جم",e["ﰗ"]="حج",e["ﰘ"]="حم",e["ﰙ"]="خج",e["ﰚ"]="خح",e["ﰛ"]="خم",e["ﰜ"]="سج",e["ﰝ"]="سح",e["ﰞ"]="سخ",e["ﰟ"]="سم",e["ﰠ"]="صح",e["ﰡ"]="صم",e["ﰢ"]="ضج",e["ﰣ"]="ضح",e["ﰤ"]="ضخ",e["ﰥ"]="ضم",e["ﰦ"]="طح",e["ﰧ"]="طم",e["ﰨ"]="ظم",e["ﰩ"]="عج",e["ﰪ"]="عم",e["ﰫ"]="غج",e["ﰬ"]="غم",e["ﰭ"]="فج",e["ﰮ"]="فح",e["ﰯ"]="فخ",e["ﰰ"]="فم",e["ﰱ"]="فى",e["ﰲ"]="في",e["ﰳ"]="قح",e["ﰴ"]="قم",e["ﰵ"]="قى",e["ﰶ"]="قي",e["ﰷ"]="كا",e["ﰸ"]="كج",e["ﰹ"]="كح",e["ﰺ"]="كخ",e["ﰻ"]="كل",e["ﰼ"]="كم",e["ﰽ"]="كى",e["ﰾ"]="كي",e["ﰿ"]="لج",e["ﱀ"]="لح",e["ﱁ"]="لخ",e["ﱂ"]="لم",e["ﱃ"]="لى",e["ﱄ"]="لي",e["ﱅ"]="مج",e["ﱆ"]="مح",e["ﱇ"]="مخ",e["ﱈ"]="مم",e["ﱉ"]="مى",e["ﱊ"]="مي",e["ﱋ"]="نج",e["ﱌ"]="نح",e["ﱍ"]="نخ",e["ﱎ"]="نم",e["ﱏ"]="نى",e["ﱐ"]="ني",e["ﱑ"]="هج",e["ﱒ"]="هم",e["ﱓ"]="هى",e["ﱔ"]="هي",e["ﱕ"]="يج",e["ﱖ"]="يح",e["ﱗ"]="يخ",e["ﱘ"]="يم",e["ﱙ"]="يى",e["ﱚ"]="يي",e["ﱛ"]="ذٰ",e["ﱜ"]="رٰ",e["ﱝ"]="ىٰ",e["ﱞ"]=" ٌّ",e["ﱟ"]=" ٍّ",e["ﱠ"]=" َّ",e["ﱡ"]=" ُّ",e["ﱢ"]=" ِّ",e["ﱣ"]=" ّٰ",e["ﱤ"]="ئر",e["ﱥ"]="ئز",e["ﱦ"]="ئم",e["ﱧ"]="ئن",e["ﱨ"]="ئى",e["ﱩ"]="ئي",e["ﱪ"]="بر",e["ﱫ"]="بز",e["ﱬ"]="بم",e["ﱭ"]="بن",e["ﱮ"]="بى",e["ﱯ"]="بي",e["ﱰ"]="تر",e["ﱱ"]="تز",e["ﱲ"]="تم",e["ﱳ"]="تن",e["ﱴ"]="تى",e["ﱵ"]="تي",e["ﱶ"]="ثر",e["ﱷ"]="ثز",e["ﱸ"]="ثم",e["ﱹ"]="ثن",e["ﱺ"]="ثى",e["ﱻ"]="ثي",e["ﱼ"]="فى",e["ﱽ"]="في",e["ﱾ"]="قى",e["ﱿ"]="قي",e["ﲀ"]="كا",e["ﲁ"]="كل",e["ﲂ"]="كم",e["ﲃ"]="كى",e["ﲄ"]="كي",e["ﲅ"]="لم",e["ﲆ"]="لى",e["ﲇ"]="لي",e["ﲈ"]="ما",e["ﲉ"]="مم",e["ﲊ"]="نر",e["ﲋ"]="نز",e["ﲌ"]="نم",e["ﲍ"]="نن",e["ﲎ"]="نى",e["ﲏ"]="ني",e["ﲐ"]="ىٰ",e["ﲑ"]="ير",e["ﲒ"]="يز",e["ﲓ"]="يم",e["ﲔ"]="ين",e["ﲕ"]="يى",e["ﲖ"]="يي",e["ﲗ"]="ئج",e["ﲘ"]="ئح",e["ﲙ"]="ئخ",e["ﲚ"]="ئم",e["ﲛ"]="ئه",e["ﲜ"]="بج",e["ﲝ"]="بح",e["ﲞ"]="بخ",e["ﲟ"]="بم",e["ﲠ"]="به",e["ﲡ"]="تج",e["ﲢ"]="تح",e["ﲣ"]="تخ",e["ﲤ"]="تم",e["ﲥ"]="ته",e["ﲦ"]="ثم",e["ﲧ"]="جح",e["ﲨ"]="جم",e["ﲩ"]="حج",e["ﲪ"]="حم",e["ﲫ"]="خج",e["ﲬ"]="خم",e["ﲭ"]="سج",e["ﲮ"]="سح",e["ﲯ"]="سخ",e["ﲰ"]="سم",e["ﲱ"]="صح",e["ﲲ"]="صخ",e["ﲳ"]="صم",e["ﲴ"]="ضج",e["ﲵ"]="ضح",e["ﲶ"]="ضخ",e["ﲷ"]="ضم",e["ﲸ"]="طح",e["ﲹ"]="ظم",e["ﲺ"]="عج",e["ﲻ"]="عم",e["ﲼ"]="غج",e["ﲽ"]="غم",e["ﲾ"]="فج";e["ﲿ"]="فح",e["ﳀ"]="فخ",e["ﳁ"]="فم",e["ﳂ"]="قح",e["ﳃ"]="قم",e["ﳄ"]="كج",e["ﳅ"]="كح",e["ﳆ"]="كخ",e["ﳇ"]="كل",e["ﳈ"]="كم",e["ﳉ"]="لج",e["ﳊ"]="لح",e["ﳋ"]="لخ",e["ﳌ"]="لم",e["ﳍ"]="له",e["ﳎ"]="مج",e["ﳏ"]="مح",e["ﳐ"]="مخ",e["ﳑ"]="مم",e["ﳒ"]="نج",e["ﳓ"]="نح",e["ﳔ"]="نخ",e["ﳕ"]="نم",e["ﳖ"]="نه",e["ﳗ"]="هج",e["ﳘ"]="هم",e["ﳙ"]="هٰ",e["ﳚ"]="يج",e["ﳛ"]="يح",e["ﳜ"]="يخ",e["ﳝ"]="يم",e["ﳞ"]="يه",e["ﳟ"]="ئم",e["ﳠ"]="ئه",e["ﳡ"]="بم",e["ﳢ"]="به",e["ﳣ"]="تم",e["ﳤ"]="ته",e["ﳥ"]="ثم",e["ﳦ"]="ثه",e["ﳧ"]="سم",e["ﳨ"]="سه",e["ﳩ"]="شم",e["ﳪ"]="شه",e["ﳫ"]="كل",e["ﳬ"]="كم",e["ﳭ"]="لم",e["ﳮ"]="نم",e["ﳯ"]="نه",e["ﳰ"]="يم",e["ﳱ"]="يه",e["ﳲ"]="ـَّ",e["ﳳ"]="ـُّ",e["ﳴ"]="ـِّ",e["ﳵ"]="طى",e["ﳶ"]="طي",e["ﳷ"]="عى",e["ﳸ"]="عي",e["ﳹ"]="غى",e["ﳺ"]="غي",e["ﳻ"]="سى",e["ﳼ"]="سي",e["ﳽ"]="شى",e["ﳾ"]="شي",e["ﳿ"]="حى",e["ﴀ"]="حي",e["ﴁ"]="جى",e["ﴂ"]="جي",e["ﴃ"]="خى",e["ﴄ"]="خي",e["ﴅ"]="صى",e["ﴆ"]="صي",e["ﴇ"]="ضى",e["ﴈ"]="ضي",e["ﴉ"]="شج",e["ﴊ"]="شح",e["ﴋ"]="شخ",e["ﴌ"]="شم",e["ﴍ"]="شر",e["ﴎ"]="سر",e["ﴏ"]="صر",e["ﴐ"]="ضر",e["ﴑ"]="طى",e["ﴒ"]="طي",e["ﴓ"]="عى",e["ﴔ"]="عي",e["ﴕ"]="غى",e["ﴖ"]="غي",e["ﴗ"]="سى",e["ﴘ"]="سي",e["ﴙ"]="شى",e["ﴚ"]="شي",e["ﴛ"]="حى",e["ﴜ"]="حي",e["ﴝ"]="جى",e["ﴞ"]="جي",e["ﴟ"]="خى",e["ﴠ"]="خي",e["ﴡ"]="صى",e["ﴢ"]="صي",e["ﴣ"]="ضى",e["ﴤ"]="ضي",e["ﴥ"]="شج",e["ﴦ"]="شح",e["ﴧ"]="شخ",e["ﴨ"]="شم",e["ﴩ"]="شر",e["ﴪ"]="سر",e["ﴫ"]="صر",e["ﴬ"]="ضر",e["ﴭ"]="شج",e["ﴮ"]="شح",e["ﴯ"]="شخ",e["ﴰ"]="شم",e["ﴱ"]="سه",e["ﴲ"]="شه",e["ﴳ"]="طم",e["ﴴ"]="سج",e["ﴵ"]="سح",e["ﴶ"]="سخ",e["ﴷ"]="شج",e["ﴸ"]="شح",e["ﴹ"]="شخ",e["ﴺ"]="طم",e["ﴻ"]="ظم",e["ﴼ"]="اً",e["ﴽ"]="اً",e["ﵐ"]="تجم",e["ﵑ"]="تحج",e["ﵒ"]="تحج",e["ﵓ"]="تحم",e["ﵔ"]="تخم",e["ﵕ"]="تمج",e["ﵖ"]="تمح",e["ﵗ"]="تمخ",e["ﵘ"]="جمح",e["ﵙ"]="جمح",e["ﵚ"]="حمي",e["ﵛ"]="حمى",e["ﵜ"]="سحج",e["ﵝ"]="سجح",e["ﵞ"]="سجى",e["ﵟ"]="سمح",e["ﵠ"]="سمح",e["ﵡ"]="سمج",e["ﵢ"]="سمم",e["ﵣ"]="سمم",e["ﵤ"]="صحح",e["ﵥ"]="صحح",e["ﵦ"]="صمم",e["ﵧ"]="شحم",e["ﵨ"]="شحم",e["ﵩ"]="شجي",e["ﵪ"]="شمخ",e["ﵫ"]="شمخ",e["ﵬ"]="شمم",e["ﵭ"]="شمم",e["ﵮ"]="ضحى",e["ﵯ"]="ضخم",e["ﵰ"]="ضخم",e["ﵱ"]="طمح",e["ﵲ"]="طمح",e["ﵳ"]="طمم",e["ﵴ"]="طمي",e["ﵵ"]="عجم",e["ﵶ"]="عمم",e["ﵷ"]="عمم",e["ﵸ"]="عمى",e["ﵹ"]="غمم",e["ﵺ"]="غمي",e["ﵻ"]="غمى",e["ﵼ"]="فخم",e["ﵽ"]="فخم",e["ﵾ"]="قمح",e["ﵿ"]="قمم",e["ﶀ"]="لحم",e["ﶁ"]="لحي",e["ﶂ"]="لحى",e["ﶃ"]="لجج",e["ﶄ"]="لجج",e["ﶅ"]="لخم",e["ﶆ"]="لخم",e["ﶇ"]="لمح",e["ﶈ"]="لمح",e["ﶉ"]="محج",e["ﶊ"]="محم",e["ﶋ"]="محي",e["ﶌ"]="مجح",e["ﶍ"]="مجم",e["ﶎ"]="مخج",e["ﶏ"]="مخم",e["ﶒ"]="مجخ",e["ﶓ"]="همج",e["ﶔ"]="همم",e["ﶕ"]="نحم",e["ﶖ"]="نحى",e["ﶗ"]="نجم",e["ﶘ"]="نجم",e["ﶙ"]="نجى",e["ﶚ"]="نمي";e["ﶛ"]="نمى",e["ﶜ"]="يمم",e["ﶝ"]="يمم",e["ﶞ"]="بخي",e["ﶟ"]="تجي",e["ﶠ"]="تجى",e["ﶡ"]="تخي",e["ﶢ"]="تخى",e["ﶣ"]="تمي",e["ﶤ"]="تمى",e["ﶥ"]="جمي",e["ﶦ"]="جحى",e["ﶧ"]="جمى",e["ﶨ"]="سخى",e["ﶩ"]="صحي",e["ﶪ"]="شحي",e["ﶫ"]="ضحي",e["ﶬ"]="لجي",e["ﶭ"]="لمي",e["ﶮ"]="يحي",e["ﶯ"]="يجي",e["ﶰ"]="يمي",e["ﶱ"]="ممي",e["ﶲ"]="قمي",e["ﶳ"]="نحي",e["ﶴ"]="قمح",e["ﶵ"]="لحم",e["ﶶ"]="عمي",e["ﶷ"]="كمي",e["ﶸ"]="نجح",e["ﶹ"]="مخي",e["ﶺ"]="لجم",e["ﶻ"]="كمم",e["ﶼ"]="لجم",e["ﶽ"]="نجح",e["ﶾ"]="جحي",e["ﶿ"]="حجي",e["ﷀ"]="مجي",e["ﷁ"]="فمي",e["ﷂ"]="بحي",e["ﷃ"]="كمم",e["ﷄ"]="عجم",e["ﷅ"]="صمم",e["ﷆ"]="سخي",e["ﷇ"]="نجي",e["﹉"]="‾",e["﹊"]="‾",e["﹋"]="‾",e["﹌"]="‾",e["﹍"]="_",e["﹎"]="_",e["﹏"]="_",e["ﺀ"]="ء",e["ﺁ"]="آ",e["ﺂ"]="آ",e["ﺃ"]="أ",e["ﺄ"]="أ",e["ﺅ"]="ؤ",e["ﺆ"]="ؤ",e["ﺇ"]="إ",e["ﺈ"]="إ",e["ﺉ"]="ئ",e["ﺊ"]="ئ",e["ﺋ"]="ئ",e["ﺌ"]="ئ",e["ﺍ"]="ا",e["ﺎ"]="ا",e["ﺏ"]="ب",e["ﺐ"]="ب",e["ﺑ"]="ب",e["ﺒ"]="ب",e["ﺓ"]="ة",e["ﺔ"]="ة",e["ﺕ"]="ت",e["ﺖ"]="ت",e["ﺗ"]="ت",e["ﺘ"]="ت",e["ﺙ"]="ث",e["ﺚ"]="ث",e["ﺛ"]="ث",e["ﺜ"]="ث",e["ﺝ"]="ج",e["ﺞ"]="ج",e["ﺟ"]="ج",e["ﺠ"]="ج",e["ﺡ"]="ح",e["ﺢ"]="ح",e["ﺣ"]="ح",e["ﺤ"]="ح",e["ﺥ"]="خ",e["ﺦ"]="خ",e["ﺧ"]="خ",e["ﺨ"]="خ",e["ﺩ"]="د",e["ﺪ"]="د",e["ﺫ"]="ذ",e["ﺬ"]="ذ",e["ﺭ"]="ر",e["ﺮ"]="ر",e["ﺯ"]="ز",e["ﺰ"]="ز",e["ﺱ"]="س",e["ﺲ"]="س",e["ﺳ"]="س",e["ﺴ"]="س",e["ﺵ"]="ش",e["ﺶ"]="ش",e["ﺷ"]="ش",e["ﺸ"]="ش",e["ﺹ"]="ص",e["ﺺ"]="ص",e["ﺻ"]="ص",e["ﺼ"]="ص",e["ﺽ"]="ض",e["ﺾ"]="ض",e["ﺿ"]="ض",e["ﻀ"]="ض",e["ﻁ"]="ط",e["ﻂ"]="ط",e["ﻃ"]="ط",e["ﻄ"]="ط",e["ﻅ"]="ظ",e["ﻆ"]="ظ",e["ﻇ"]="ظ",e["ﻈ"]="ظ",e["ﻉ"]="ع",e["ﻊ"]="ع",e["ﻋ"]="ع",e["ﻌ"]="ع",e["ﻍ"]="غ",e["ﻎ"]="غ",e["ﻏ"]="غ",e["ﻐ"]="غ",e["ﻑ"]="ف",e["ﻒ"]="ف",e["ﻓ"]="ف",e["ﻔ"]="ف",e["ﻕ"]="ق",e["ﻖ"]="ق",e["ﻗ"]="ق",e["ﻘ"]="ق",e["ﻙ"]="ك",e["ﻚ"]="ك",e["ﻛ"]="ك",e["ﻜ"]="ك",e["ﻝ"]="ل",e["ﻞ"]="ل",e["ﻟ"]="ل",e["ﻠ"]="ل",e["ﻡ"]="م",e["ﻢ"]="م",e["ﻣ"]="م",e["ﻤ"]="م",e["ﻥ"]="ن",e["ﻦ"]="ن",e["ﻧ"]="ن",e["ﻨ"]="ن",e["ﻩ"]="ه",e["ﻪ"]="ه",e["ﻫ"]="ه",e["ﻬ"]="ه",e["ﻭ"]="و",e["ﻮ"]="و",e["ﻯ"]="ى",e["ﻰ"]="ى",e["ﻱ"]="ي",e["ﻲ"]="ي",e["ﻳ"]="ي",e["ﻴ"]="ي",e["ﻵ"]="لآ",e["ﻶ"]="لآ",e["ﻷ"]="لأ",e["ﻸ"]="لأ",e["ﻹ"]="لإ",e["ﻺ"]="لإ",e["ﻻ"]="لا",e["ﻼ"]="لا"}),t.reverseIfRtl=r}),define("modules/clean/react/previews/pdf_viewer/transform",["require","exports","tslib","modules/clean/react/previews/pdf_viewer/font","file-viewer/preview_doc","modules/clean/referrer_cleansing_redirect","modules/core/exception"],function(e,t,n,o,r,a,i){"use strict";function s(e,t,n){return n.map(function(e){return e.coordinates.map(function(e){return{x:e.x,y:t-e.y}})})}function l(e,t,n,o,r,a,i){return i.map(function(i){return{coordinates:i.map(function(e){return{x:(e.x-t)/a,y:r-(e.y-n)/a}}),page:e,page_size:{width:o,height:r}}})}function d(e){try{var t=r.transformText(e);return n.__assign({},t,{str:t.str.map(function(e){if(e.type===r.TextNodeType.link)try{return n.__assign({},e,{href:a.get_redirect_uri(e.text).toString()})}catch(e){}return e})})}catch(e){i.reportException({err:new Error("PDF Text transformation failed"),tags:["pdfPreviews"],severity:i.SEVERITY.NONCRITICAL})}return{dir:r.TextDir.ltr,str:[]}}function c(e){return e&&e.pages?Object.keys(e.pages).reduce(function(t,n){return t[n]=(e.pages[n]||[]).map(function(e){var t=d(e.t);return{d:e.d,t:e.t,r:e.r,h:e.h,rawText:e.t,transformedText:t.str,dir:t.dir,font:o.renderFont(e.font)}}),t},{}):{}}Object.defineProperty(t,"__esModule",{value:!0}),a=n.__importStar(a),i=n.__importStar(i),t.transformPdfCoordinates=s,t.transformViewportCoordinates=l,t.transformPdfgenText=c}),define("modules/clean/react/previews/pdf_viewer/utils",["require","exports","tslib","modules/clean/react/previews/pdf_viewer/event_emitter"],function(e,t,n,o){"use strict";function r(e){if(c===e)return p;var t=[];return e.forEach(function(e){for(var n=e[0],o=e[1],r=e[2],a=0;a<r;a++)t.push([n,o])}),c=e,p=t,t}function a(e,t){for(var n=r(e),o=[],a=0;a<n.length;a++){var i=n[a],s=i[0],l=i[1];o.push(t(a,s,l))}return o}function i(e){(new Image).src=e}function s(e,t){if(e.postMessageToParent("annotation-hidden"),o.eventEmitter.emit("resize"),t){var n=document,r=window.getSelection?window.getSelection():n.selection;if(r){var a=r.anchorNode,i=r.focusNode;t.contains(a)&&t.contains(i)&&(window.getSelection?window.getSelection().removeAllRanges():n.selection&&n.selection.empty())}}}function l(e,t){if(e)return n.__assign({},e,{annotations:e.annotations[t]||[]})}function d(e,t){void 0===t&&(t={});var n=e[0],o=e[1],r=t.maxWidth,a=t.maxHeight;if(void 0!==r&&void 0!==a){var i=Math.min(r/n,a/o);return[i*n,i*o]}return void 0!==r?[r,r/n*o]:void 0!==a?[a/o*n,a]:e}Object.defineProperty(t,"__esModule",{value:!0});var c,p;t.expandDimensions=r,t.mapPages=a,t.prefetchImage=i,t.resetAnnotationState=s,t.annotationsAtPage=l,t.scaleDimension=d}),define("modules/clean/react/previews/pdf_viewer/zoom",["require","exports","modules/clean/previews/util","modules/core/browser_detection"],function(e,t,n,o){"use strict";function r(){return d.FIT_PAGE}function a(e){return n.isPptExtension(e)&&!o.is_mobile_or_tablet()?u.SINGLE_PAGE:u.CONTINUOUS}function i(e,t,n,o){var r=1;if(e===d.FIT_PAGE){for(var a=0,i=0,s=0,l=t;s<l.length;s++){var c=l[s],u=c[0],f=c[1];i=Math.max(u,i),a=Math.max(f,a)}r=Math.min(n/a,o/i)}else e===d.FIT_TO_WIDTH&&(r=o/t[0][0]);return Math.min(r,p)}function s(e,t){return 2048/Math.max(e,t)}function l(e,t){if(t){var n=t.originalHeight;if(s(t.originalWidth,n)>e)return 0}for(var o=0,r=c;o<r.length;o++){var a=r[o];if(a>=e)return a}return p}Object.defineProperty(t,"__esModule",{value:!0});var d,c=[1,2,4],p=Math.max.apply(Math,c);(function(e){e[e.NONE=0]="NONE",e[e.FIT_TO_WIDTH=1]="FIT_TO_WIDTH",e[e.FIT_PAGE=2]="FIT_PAGE"})(d=t.FittingMode||(t.FittingMode={}));var u;(function(e){e[e.CONTINUOUS=0]="CONTINUOUS",e[e.SINGLE_PAGE=1]="SINGLE_PAGE"})(u=t.ScrollMode||(t.ScrollMode={})),t.fullscreenFittingMode=r,t.defaultScrollMode=a,t.computeClientScaleFactor=i,t.calculatedFetchedScaleFactor=l}),define("modules/clean/react/previews/powerpoint/annotations_provider",["require","exports","tslib","react","external/lodash","modules/clean/react/previews/pdf_viewer/event_emitter","modules/clean/annotations/annotation","modules/clean/react/file_viewer/data/selectors","modules/clean/react/file_viewer/data/actions","external/react-redux"],function(e,t,n,o,r,a,i,s,l,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importDefault(o);var c=(function(e){function t(t){var o=e.call(this,t)||this;return o.containerEl=null,o.onRef=function(e){return o.containerEl=e},o.onFileFeedbackUIReady=function(){o.props.frameMessengerClient.postMessageToParent("page-rendered")},o.onScrollToAnnotation=function(e){var t=function(n,o){o===e.page-1&&(a.eventEmitter.off("page-set-to",t),a.eventEmitter.emit("highlight-annotation",e.commentActivity))};a.eventEmitter.on("page-set-to",t),a.eventEmitter.emit("set-current-page",e.page-1)},o.onUpdateAnnotations=function(e){var t=e.annotations.reduce(function(e,t){var n=t.annotation.pdf_coordinates[0].page,o=n-1;return e[o]=e[o]||[],e[o].push(t),e},[]);o.setState({annotations:t})},o.onRemoveAllAnnotations=function(){o.setState({annotations:[]})},o.onEnableAnnotationCreation=function(){o.setState({isAnnotationCreationEnabled:!0})},o.onDisableAnnotationCreation=function(){o.setState({isAnnotationCreationEnabled:!1})},o.onEnableRegionCreation=function(){var e=o.props.enableRegionCreation;"function"==typeof e&&e()},o.onDisableRegionCreation=function(){var e=o.props.disableRegionCreation;"function"==typeof e&&e()},o.onClearAnnotationSelection=function(){window.getSelection().removeAllRanges()},o.onRequestDocMetadata=function(){var e=o.props,t=e.docMetadata,n=e.frameMessengerClient;t&&t.metadata&&n.postMessageToParent("doc-metadata-load",{metadata:t.metadata})},o.onAnnotationPlaced=function(e){o.setState({pendingAnnotation:n.__assign({},e,{commentActivity:{activity_key:"pending"},options:{isGhostAnnotation:!1,annotationNumber:-1,isAnnotationNumberingEnabled:!1}})})},o.onAnnotationHidden=function(){o.setState({pendingAnnotation:void 0})},o.onSelectionChange=r.throttle(function(){o.setState({isSelectionInPreview:o.isSelectionInPreview()})},150),o.state={annotations:[],isAnnotationCreationEnabled:!1,isAnnotationHighlightEnabled:!0,isSelectionInPreview:!1},o}return n.__extends(t,e),t.prototype.isSelectionInPreview=function(){var e=window.getSelection();if(!this.containerEl)return!1;for(var t=0;t<e.rangeCount;++t)if(!this.containerEl.contains(e.getRangeAt(t).commonAncestorContainer))return!1;return!0},t.prototype.getAnnotations=function(){var e=this.state,t=e.annotations,n=void 0===t?[]:t,o=e.pendingAnnotation;if(e.isSelectionInPreview||!o||o.annotation.type!==i.AnnotationTypes.HIGHLIGHT)return n;var a=r.clone(n),s=o.annotation.pdf_coordinates[0].page-1;return a[s]=(a[s]||[]).concat([o]),a},t.prototype.componentDidMount=function(){a.eventEmitter.on("file-feedback-ui-ready",this.onFileFeedbackUIReady),a.eventEmitter.on("scroll-to-annotation",this.onScrollToAnnotation),a.eventEmitter.on("update-annotations",this.onUpdateAnnotations),a.eventEmitter.on("remove-all-annotations",this.onRemoveAllAnnotations),a.eventEmitter.on("enable-annotation-creation",this.onEnableAnnotationCreation),a.eventEmitter.on("disable-annotation-creation",this.onDisableAnnotationCreation),a.eventEmitter.on("enable-region-creation",this.onEnableRegionCreation),a.eventEmitter.on("disable-region-creation",this.onDisableRegionCreation),a.eventEmitter.on("clear-annotation-selection",this.onClearAnnotationSelection),
a.eventEmitter.on("request-doc-metadata",this.onRequestDocMetadata),a.eventEmitter.on("annotation-placed",this.onAnnotationPlaced),a.eventEmitter.on("annotation-hidden",this.onAnnotationHidden),document.addEventListener("selectionchange",this.onSelectionChange)},t.prototype.componentWillUnmount=function(){a.eventEmitter.off("file-feedback-ui-ready",this.onFileFeedbackUIReady),a.eventEmitter.off("scroll-to-annotation",this.onScrollToAnnotation),a.eventEmitter.off("update-annotations",this.onUpdateAnnotations),a.eventEmitter.off("remove-all-annotations",this.onRemoveAllAnnotations),a.eventEmitter.off("enable-annotation-creation",this.onEnableAnnotationCreation),a.eventEmitter.off("disable-annotation-creation",this.onDisableAnnotationCreation),a.eventEmitter.off("enable-region-creation",this.onEnableRegionCreation),a.eventEmitter.off("disable-region-creation",this.onDisableRegionCreation),a.eventEmitter.off("clear-annotation-selection",this.onClearAnnotationSelection),a.eventEmitter.off("request-doc-metadata",this.onRequestDocMetadata),a.eventEmitter.off("annotation-placed",this.onAnnotationPlaced),a.eventEmitter.off("annotation-hidden",this.onAnnotationHidden),document.removeEventListener("selectionchange",this.onSelectionChange)},t.prototype.render=function(){var e=this.state.pendingAnnotation;return o.default.createElement("div",{className:"flex-preview-container",ref:this.onRef},this.props.children({annotations:this.getAnnotations(),isAnnotationCreationEnabled:!!this.state.isAnnotationCreationEnabled,isAnnotationRegionEnabled:!(!this.props.isAnnotationRegionEnabled||e&&e.annotation.type===i.AnnotationTypes.HIGHLIGHT),isAnnotationHighlightEnabled:!!this.state.isAnnotationHighlightEnabled,frameMessenger:this.props.frameMessengerClient}))},t})(o.default.PureComponent),p=d.connect(function(e){return{isAnnotationRegionEnabled:s.getIsAnnotationRegionEnabled(e)}},{enableRegionCreation:l.enableRegionCreation,disableRegionCreation:l.disableRegionCreation})(c);t.AnnotationsProvider=p}),define("modules/clean/react/previews/powerpoint/frame_messenger_provider",["require","exports","tslib","react","modules/clean/react/previews/pdf_viewer/frame_messenger_shims","modules/clean/react/file_viewer/frame_interface","modules/clean/react/previews/pdf_viewer/event_emitter"],function(e,t,n,o,r,a,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importDefault(o);var s=(function(e){function t(t){var n=e.call(this,t)||this;n.onMessage=function(e){i.eventEmitter.emit(e.action,e.parameters)};var o=n.props,s=o.invalidate,l=o.messages;return n.channel=r.makeChannel(),n.host=new r.FrameMessengerHostShim(n.channel),n.client=new r.FrameMessengerClientShim(n.channel),n.client.configureParentMessaging(n.onMessage,l),n.client.startListening(),a.FileViewerFrameInterface.setFrameMessengerFactory(function(){return new r.FrameMessengerHostShim(n.channel)}),"function"==typeof s&&s(),n}return n.__extends(t,e),t.prototype.componentWillUnmount=function(){this.client.stopListening()},t.prototype.render=function(){return this.props.children(this.client,this.host)},t})(o.default.Component);t.FrameMessengerProvider=s}),define("modules/clean/react/previews/powerpoint/with_annotations",["require","exports","tslib","react","hoist-non-react-statics","modules/clean/react/helpers","modules/clean/react/previews/powerpoint/annotations_provider"],function(e,t,n,o,r,a,i){"use strict";function s(e){var t=(function(t){function r(){var n=null!==t&&t.apply(this,arguments)||this;return n.displayName="WithAnnotations("+a.getDisplayName(e),n}return n.__extends(r,t),r.prototype.render=function(){var t=this,r=this.props,a=r.docMetadata,s=r.frameMessengerClient;return o.default.createElement(i.AnnotationsProvider,{docMetadata:a,frameMessengerClient:s},function(r){return o.default.createElement(e,n.__assign({},t.props,{annotationProps:r}))})},r})(o.default.PureComponent);return r.default(t,e)}Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importDefault(o),r=n.__importDefault(r),t.withAnnotations=s}),define("modules/clean/react/previews/powerpoint/with_frame_messenger",["require","exports","tslib","react","hoist-non-react-statics","modules/clean/react/helpers","modules/clean/react/previews/powerpoint/frame_messenger_provider"],function(e,t,n,o,r,a,i){"use strict";function s(e){return function(t){var s=(function(r){function s(){var e=null!==r&&r.apply(this,arguments)||this;return e.displayName="WithFrameMessenger("+a.getDisplayName(t),e}return n.__extends(s,r),s.prototype.render=function(){var r=this;return o.default.createElement(i.FrameMessengerProvider,{messages:e,invalidate:this.props.invalidateFrameMessenger},function(e,a){return o.default.createElement(t,n.__assign({},r.props,{frameMessengerClient:e,frameMessengerHost:a}))})},s})(o.default.PureComponent);return r.default(s,t)}}Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importDefault(o),r=n.__importDefault(r),t.withFrameMessenger=s}),define("modules/clean/react/previews/preview_pdf",["require","exports","tslib","react","modules/core/i18n","external/lodash","external/lodash","external/react-redux","external/classnames","modules/clean/react/previews/constants","file-viewer/core","modules/clean/react/file_viewer/location_utils","modules/clean/react/file_viewer/constants","modules/clean/react/previews/pdf_viewer/event_emitter","modules/clean/react/size_class/constants","modules/clean/react/file_viewer/data/selectors","modules/clean/previews/data/selectors","modules/clean/previews/data/actions","modules/clean/react/previews/preview_toolbar","modules/clean/web_timing_logger","modules/clean/react/previews/pdf_viewer/transform","modules/clean/react/previews/loading_indicator","modules/clean/react/previews/pdf_viewer/utils","modules/clean/react/file_viewer/sidebar_helpers","modules/clean/react/file_viewer/full_screen_helpers","modules/clean/react/previews/pdf_viewer/zoom","spectrum/dimensions","modules/clean/react/comments2/data/actions","modules/clean/react/comments2/data/selectors","modules/clean/react/comments2/data/types","modules/clean/react/keyboard_binding/keyboard_binding_connector","modules/core/browser","modules/clean/react/keyboard_binding/keyboard_binding","modules/clean/react/previews/pdf_viewer/keyboard_bindings","modules/clean/react/previews/pdf_viewer/urls","modules/clean/react/previews/pdf_viewer/frame_messenger","modules/clean/react/previews/powerpoint/with_frame_messenger","modules/clean/react/previews/powerpoint/with_annotations","file-viewer/preview_doc","file-viewer/strings","file-viewer/core","modules/clean/react/previews/pdf_viewer/layers","modules/clean/react/previews/pdf_viewer/annotation_creation_layer","modules/core/browser_detection","modules/clean/react/file_viewer/data/actions","modules/clean/react/file_viewer/data/actions","modules/clean/react/previews/preview_toolbar_button","file-viewer/toolbar","modules/clean/react/file_viewer/logging","file-viewer/assets-metaserver","modules/clean/react/previews/print_helpers","modules/clean/previews/actions","file-viewer/polyfills"],function(e,t,n,o,r,a,i,s,l,d,c,p,u,f,g,m,h,v,b,_,w,P,y,M,A,E,S,L,C,x,I,N,D,T,O,F,k,R,U,B,W,z,H,K,j,V,q,G,Z,Q,J,X){"use strict";function Y(){}function $(e){var t=e.imageUrlTmpl,n=e.useCanned,o=e.docMetadata,r=void 0===o?{}:o,i=r.metadata,s=void 0===i?void 0:i,l=r.text,d=void 0===l?{}:l;if(!s||!d||!s.page_count)return[];var c=y.expandDimensions(s.dimensions),p=w.transformPdfgenText(d);return a.range(0,s.page_count).map(function(e){return{pageIndex:e,dimension:c[e],textboxes:p&&p[e]||[],links:d.links&&d.links[e]||[],thumbnailUrl:O.imageUrl(t,e,0,n),imgUrls:{"1x":O.imageUrl(t,e,0,n),"4x":O.imageUrl(t,e,400,n)}}})}Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importDefault(o),a=n.__importStar(a),l=n.__importDefault(l),_=n.__importStar(_),N=n.__importStar(N),K=n.__importStar(K);var ee=L.Actions.setPendingNumberedAnnotationMayBeOffscreen,te=W.createMetaserverFormatters("en",B.strings,W.createI18nCache()),ne=W.resolveAsset.bind(null,Q.assets),oe=["pdf"],re=(function(e){function t(t){var o=e.call(this,t)||this;o.downloadSucceedLogged=!1,o.renderSucceededLogged=!1,o.renderer=null,o.onPageMouseEnter=function(e){var t=+e.currentTarget.dataset.index;e.persist(),o.state.annotationCreationDelegatePool[t].onMouseEnterCallback(e)},o.onPageMouseMove=function(e){var t=+e.currentTarget.dataset.index;e.persist(),o.state.annotationCreationDelegatePool[t].onMouseMoveCallback(e)},o.onPageMouseUp=function(e){var t=+e.currentTarget.dataset.index;e.persist(),o.state.annotationCreationDelegatePool[t].onMouseUpCallback(e)},o.onPageMouseDown=function(e){o.renderer&&o.renderer.updatePageOffset();var t=+e.currentTarget.dataset.index;e.persist(),o.state.annotationCreationDelegatePool[t].onMouseDownCallback(e)},o.submitPassword=function(e){o._refreshBlob(e)},o.dismissPassword=function(){o.props.onError&&o.props.onError(d.ErrorType.PasswordProtectedError)},o._refreshBlob=function(e){var t=o.props,n=t.refreshBlobAction,r=t.revisionId,a=o.props,i=a.imageUrlTmpl,s=a.textUrlTmpl,l=a.refreshUrl;"function"==typeof n&&n(r,l||"",{image_url_tmpl:i,text_url_tmpl:s,refresh_url:l},e)},o._onScrollToPage=function(e){o.props.updateCurrentPageIndex(e),o.props.setPendingNumberedAnnotationMayBeOffscreen();var t=50*Math.floor(e/50);t+50-e<15&&(t+=50),o.fetchDataForPage(t)},o.onMetadataLoad=function(e){o.props.frameMessengerClient.postMessageToParent("doc-metadata-load",{metadata:e})},o.logRenderSuccess=function(){o.downloadSucceedLogged||(o.downloadSucceedLogged=!0,o.logFilePreviewEvent(u.EventType.FilePreviewDownloadSucceeded)),o.renderSucceededLogged||(o.renderSucceededLogged=!0,o.logFilePreviewEvent(u.EventType.FilePreviewRenderSucceeded),"function"==typeof o.props.setRenderStatusSuccess&&o.props.setRenderStatusSuccess(),o.props.frameMessengerClient.postMessageToParent(F.WT_EVENT_PAGE_RENDERED)),o.setState({pageRendered:!0})},o.logTTI=function(){_.mark_time_to_view(),_.mark_time_to_interactive(),o.props.filePreviewSession&&o.props.filePreviewSession.markPrimaryEvent()},o.sendIdleMouse=i.debounce(function(){o.props.frameMessengerClient.postMessageToParent("idle-mouse")},1500),o.onMouseMove=i.throttle(function(){o.props.frameMessengerClient.postMessageToParent("active-mouse"),o.sendIdleMouse()},16),o.onToolbarShow=function(){o.setState({isToolbarVisible:!0})},o.onToolbarHide=function(){o.setState({isToolbarVisible:!1})},o.onError=function(e){o.setState({error:e})},o.onImageError=function(){o.setState({error:r._("Some pages failed to load")})},o.onReload=function(){N.reload(!0)},o.handlePageChange=function(e){var t=o.state.currentPageIndex,n=o.props.docMetadata;!n||!n.metadata||e<0||e>=n.metadata.page_count||(o.setState({currentPageIndex:e}),o._onScrollToPage(e),f.eventEmitter.emit("page-set-to",e,t))},o._jumpToPage=function(e){o.renderer&&o.renderer.jumpToPage(e)},o.pageDown=function(){o.renderer&&o.renderer.pageDown()},o.pageUp=function(){o.renderer&&o.renderer.pageUp()},o.scrollDown=function(){o.renderer&&o.renderer.scrollDown()},o.scrollUp=function(){o.renderer&&o.renderer.scrollUp()},o.zoomIn=function(){var e=Math.min(1.1*o.state.scaleFactor,10);o.setState({scaleFactor:e,fittingMode:E.FittingMode.NONE})},o.zoomOut=function(){var e=Math.max(o.state.scaleFactor/1.1,.1);o.setState({scaleFactor:e,fittingMode:E.FittingMode.NONE})},o.jumpToPageWithToolbarLogging=Z.wrapToolbarActionWithLogging(o._jumpToPage,u.UserAction.PageChange),o.handlePageUpWithToolbarLogging=Z.wrapToolbarActionWithLogging(o.pageUp,u.UserAction.PageUp),o.handlePageDownWithToolbarLogging=Z.wrapToolbarActionWithLogging(o.pageDown,u.UserAction.PageDown),o.handleZoomInWithToolbarLogging=Z.wrapToolbarActionWithLogging(o.zoomIn,u.UserAction.ZoomIn),o.handleZoomOutWithToolbarLogging=Z.wrapToolbarActionWithLogging(o.zoomOut,u.UserAction.ZoomOut),o.print=function(e){o.props.autoprintUrl&&(X.docPrint(o.props.autoprintUrl),Z.logUserAction(u.UserAction.Print,e))},o.onPageUp=Z.wrapKeyboardActionWithLogging(D.withPreventDefault(o.pageUp),u.UserAction.PageUp),o.onPageDown=Z.wrapKeyboardActionWithLogging(D.withPreventDefault(o.pageDown),u.UserAction.PageDown),o.onScrollUp=Z.wrapKeyboardActionWithLogging(D.withPreventDefault(o.scrollUp),u.UserAction.ScrollUp),o.onScrollDown=Z.wrapKeyboardActionWithLogging(D.withPreventDefault(o.scrollDown),u.UserAction.ScrollDown),o.onZoomIn=Z.wrapKeyboardActionWithLogging(D.withPreventDefault(o.zoomIn),u.UserAction.ZoomIn),o.onZoomOut=Z.wrapKeyboardActionWithLogging(D.withPreventDefault(o.zoomOut),u.UserAction.ZoomOut),o.onPrintKeyPressed=D.withPreventDefault(function(){return o.print(u.UserActionContext.Keyboard)}),o.docFullScreenKeyboardBindings=T.getContinuousPageKeyboardBindings({isFullScreen:!0,keyUp:o.onScrollUp,keyDown:o.onScrollDown,pageUp:o.onPageUp,pageDown:o.onPageDown,zoomIn:o.onZoomIn,zoomOut:o.onZoomOut,print:o.onPrintKeyPressed}),o.docSidebarFocusedKeyboardBindings=T.getContinuousPageKeyboardBindings({isFullScreen:!1,keyUp:o.pageUp,keyDown:o.onPageDown,pageUp:o.onPageUp,pageDown:o.onPageDown,zoomIn:o.onZoomIn,zoomOut:o.onZoomOut,print:o.onPrintKeyPressed}),o.docKeyboardBindings=T.getContinuousPageKeyboardBindings({isFullScreen:!1,keyUp:o.onScrollUp,keyDown:o.onScrollDown,pageUp:o.onPageUp,pageDown:o.onPageDown,zoomIn:o.onZoomIn,zoomOut:o.onZoomOut,print:o.onPrintKeyPressed}),o.getDocKeyboardBindings=function(e,t){return e?o.docFullScreenKeyboardBindings:t?o.docSidebarFocusedKeyboardBindings:o.docKeyboardBindings},o.handlePageScroll=function(){o.props.setPendingNumberedAnnotationMayBeOffscreen(),o.state.annotationCreationDelegatePool.forEach(function(e){return e.onScrollCallback()}),o.props.annotationProps&&o.props.annotationProps.frameMessenger.postMessageToParent("scroll")},o.renderLayers=function(e){return function(t){var r=z.generateLayers(e),a=o.props,i=a.annotationProps,s=a.comments2AnnotationsEnabled,l=o.state.annotationCreationDelegatePool,d=t.data;return r(n.__assign({},t,{legacyProps:n.__assign({},t.legacyProps,{annotationCreationDelegate:l[d.pageIndex],annotationProps:y.annotationsAtPage(i,d.pageIndex),comments2AnnotationsEnabled:s})}))}},o.onDismissError=function(){o.setState({error:void 0})};var a=t.isFullscreen?E.fullscreenFittingMode():E.FittingMode.FIT_TO_WIDTH,s={passwordRetryAttempt:0,showPasswordPrompt:!1,fittingMode:a,currentPageIndex:0,isSidebarFocused:!1,scaleFactor:1,pages:[],annotationCreationDelegatePool:[],isToolbarVisible:!1,persistToolbar:!1};return o.logFilePreviewEvent(u.EventType.FilePreviewSupportConfirmed),o.logFilePreviewEvent(u.EventType.FilePreviewDownloadAttempted),t.docMetadata&&t.docMetadata.metadata&&Array.isArray(t.docMetadata.metadata.dimensions)&&t.docMetadata.metadata.dimensions.length&&(s.scaleFactor=t.height&&t.width?E.computeClientScaleFactor(a,t.docMetadata.metadata.dimensions,t.height,t.width-32):1,s.pages=$(t),s.annotationCreationDelegatePool=s.pages.map(function(e){return H.createAnnotationCreationDelegate()})),o.state=s,o}return n.__extends(t,e),Object.defineProperty(t.prototype,"startPage",{get:function(){if(this.props.location){var e=p.getPageQuery(this.props.location);if(e)return e-1}return 0},enumerable:!0,configurable:!0}),t.prototype.componentDidMount=function(){var e=this;"function"==typeof this.props.fetchDocMetadata&&this.props.fetchDocMetadata(this.props.revisionId,this.props.textUrlTmpl),this.refreshIntervalId=window.setInterval(function(){e._refreshBlob()},108e5),f.eventEmitter.on("error",this.onError);var t=this.props.docMetadata,n=(void 0===t?{}:t).metadata,o=void 0===n?void 0:n;o&&this.startPage&&this.startPage>=0&&this.startPage<o.page_count&&this._jumpToPage(this.startPage)},t.prototype.componentWillUnmount=function(){f.eventEmitter.off("error",this.onError),window.clearInterval(this.refreshIntervalId),p.updatePageQuery(null),this.props.updateCurrentPageIndex(0)},t.prototype.componentDidUpdate=function(e){var t=e.documentRectangleToMakeVisible,n=e.docMetadata,o=(void 0===n?{}:n).metadata,r=void 0===o?void 0:o,a=this.props,i=a.documentRectangleToMakeVisible,s=a.docMetadata,l=(void 0===s?{}:s).metadata,d=void 0===l?void 0:l,c=a.height,p=a.width;if(i&&t!==i){var u=i.page;if(u!==this.state.currentPageIndex)return void this._jumpToPage(u)}if(!r&&d&&this.startPage&&this.startPage>=0&&this.startPage<d.page_count&&this._jumpToPage(this.startPage),e.isFullscreen!==this.props.isFullscreen){var f=e.isFullscreen?E.FittingMode.FIT_TO_WIDTH:E.FittingMode.FIT_PAGE;this.setState({fittingMode:f})}var g=this.isSidebarOpen(),m=this.isSidebarOpen(e);this.state.fittingMode!==E.FittingMode.NONE&&(e.height!==this.props.height||e.width!==this.props.width||g!==m)&&d&&Array.isArray(d.dimensions)&&d.dimensions.length&&this.setState({scaleFactor:E.computeClientScaleFactor(this.state.fittingMode,d.dimensions,c,p-32-(g?U.SIDEBAR_THUMBNAIL_WIDTH:0))})},t.prototype.componentWillReceiveProps=function(e){var t=e.docMetadata,n=e.revisionId,o=e.fileExtension,r=e.isVirtualPreview,a=e.onLoad,i=e.textUrlTmpl,s=e.fetchDocMetadata,l=e.annotationProps,d=this.props,p=d.isVirtualPreview,f=d.revisionId,g=d.docMetadata,m=d.textUrlTmpl,h=this.state.fittingMode;if(this.props.isFullscreen!==e.isFullscreen&&(h=e.isFullscreen?E.fullscreenFittingMode():E.FittingMode.FIT_TO_WIDTH,this.setState({fittingMode:h})),n!==f||i!==m||r!==p)this.logFilePreviewEvent(u.EventType.FilePreviewSupportConfirmed),this.logFilePreviewEvent(u.EventType.FilePreviewDownloadAttempted),this.setState({pageRendered:!1,passwordRetryAttempt:0,showPasswordPrompt:!1}),this.downloadSucceedLogged=!1,this.renderSucceededLogged=!1,"function"==typeof s&&s(n,i);else if(t&&t!==g){var v=t.error,b=t.metadata;if(!v||g&&v===g.error)if(b){g&&b===g.metadata||(b.page_count?g&&g.metadata||this.handleMetadataLoad(t,a):this.handleError(c.RivieraStatus.Unknown));var _=$(e);this.setState({pages:_,annotationCreationDelegatePool:_.map(function(e){return H.createAnnotationCreationDelegate()})})}else this.handleError(c.RivieraStatus.Unknown,o);else this.handleError(v.statusCode,o)}if(e.width!==this.props.width||e.height!==this.props.height||e.isSidebarOpen!==this.props.isSidebarOpen){var w=void 0;t&&l&&this.renderer&&(w=this.renderer.getContainerEl())&&y.resetAnnotationState(l.frameMessenger,w)}},t.prototype.logFilePreviewEvent=function(e,t){void 0===t&&(t={}),this.props.filePreviewSession&&this.props.filePreviewSession.recordEvent(e,t)},t.prototype.handleError=function(e,t){var n=this.props.onError;e===c.RivieraStatus.PasswordProtected?t&&oe.includes(t)?this.setState({showPasswordPrompt:!0,passwordRetryAttempt:this.state.passwordRetryAttempt+1}):"function"==typeof n&&n(d.ErrorType.PasswordProtectedError,e):(this.logFilePreviewEvent(u.EventType.FilePreviewDownloadFailed,{rivieraStatusCode:e?e.toString():""}),"function"==typeof n&&n(d.ErrorType.LoadError,e))},t.prototype.handleMetadataLoad=function(e,t){e&&(this.onMetadataLoad(e.metadata),"function"==typeof t&&t(),this.setState({showPasswordPrompt:!1}))},t.prototype.fetchDataForPage=function(e){if(e%50!==0)throw new Error("invalid page lower bound "+e);var t=this.props,n=t.revisionId,o=t.textUrlTmpl,r=t.docMetadata,a=t.fetchDataForPageAction;if("function"==typeof a){if(r){var i=r.metadata,s=r.text;if(i&&i.page_count<=e)return;if(s&&s.pages&&s.pages[e])return}a(n,o,e,e+50)}},t.prototype.isSidebarOpen=function(e){void 0===e&&(e=this.props);var t=e.isSidebarOpen,n=e.sizeClass,o=e.isFullscreen;return!(!M.isSidebarEnabled(u.DocType.pdf,n,!!o)||!(t||{})[u.DocType.pdf])},t.prototype.renderCloseFullscreenButton=function(){return this.props.isFullscreen?o.default.createElement("div",{className:"close-x"},o.default.createElement("button",{onClick:this.props.onExitFullscreen,className:"close-x-button","aria-label":r._("Close")},"✕")):null},t.prototype.render=function(){var e=this,t=this.props,n=t.autoprintUrl,a=t.annotationProps.isAnnotationRegionEnabled,i=t.comments2AnnotationsEnabled,s=t.docMetadata,d=t.height,p=t.isArchiveFile,f=t.isFullscreen,m=t.isSidebarOpen,h=t.isVirtualPreview,v=t.onSidebarClose,_=t.onSidebarOpen,w=t.previewMetadata,y=t.revisionId,E=t.sharePermission,S=t.sizeClass,L=t.width,C=this.state,N=C.scaleFactor,D=C.pages,T=C.currentPageIndex,O=C.pageRendered,F=C.passwordRetryAttempt,k=C.showPasswordPrompt,R=C.isToolbarVisible,B=C.error,W=i===x.Comments2AnnotationsMode.Off,z=s&&s.metadata&&s.metadata.page_count||0,H=this.renderCloseFullscreenButton(),j={"viewer-container":!0,"sidebar-visible":this.isSidebarOpen()},V=J.canPrint(E)&&!!n,Z=O?null:o.default.createElement(P.LoadingIndicator,{className:"loading-indicator"});return o.default.createElement("div",{className:"preview-content preview-pdf preview-pdf-ssr",onMouseMove:this.onMouseMove,onTouchStart:this.onMouseMove,onTouchMove:this.onMouseMove},k?o.default.createElement(U.PasswordModal,{className:"file-viewer-modal-overlay",formatMessage:te.formatMessage,onSubmit:this.submitPassword,onDismiss:this.dismissPassword,enteredWrongPassword:F>1,onComponentDidMount:this.logTTI}):null,o.default.createElement("div",{className:l.default(j)},Z,o.default.createElement(I.KeyboardBindingConnector,{keyboardBindings:this.getDocKeyboardBindings(!!this.props.isFullscreen,this.state.isSidebarFocused)}),H,o.default.createElement(U.PreviewPDF,{fileMetadata:{file_id:y+(h?"-virtual":""),file_name:""},filePreviewUiData:{currentPageIndex:T,scaleFactor:N,isDocSidebarOpen:this.isSidebarOpen(),minScaleFactor:0,isSidebarOpen:!1,currentMode:c.FileViewerMode.Default,sidebar:{visibility:c.SidebarVisibility.Closed,selectedControlId:c.SidebarControlId.Documentation,paneStack:[]}},id:"",previewMetadata:w,className:l.default("pdf-viewer",{fullscreen:this.props.isFullscreen}),intl:te,height:d,onPageChange:this.handlePageChange,onInteractive:this.logTTI,onPageImageError:this.onImageError,onRenderFailed:Y,onRenderSucceeded:this.logRenderSuccess,onMouseDown:this.onPageMouseDown,onMouseEnter:this.onPageMouseEnter,onMouseMove:this.onPageMouseMove,onMouseUp:this.onPageMouseUp,onScroll:this.handlePageScroll,pageClassName:"page",data:D,config:c.DEFAULT_CONFIG,pagesClassName:l.default("viewer-container__sizer","page-container","pdf-viewer__pages",{"ios-enable-inertial-scroll":K.iOS,"legacy-region-creation-on":W&&a,"legacy-region-creation-off":W&&!a}),ref:function(t){return e.renderer=t},width:L,dispatch:Y,layerRenderFn:this.renderLayers,resolveAsset:ne}),B?o.default.createElement(U.ErrorSnackbar,{formatMessage:te.formatMessage,className:R?"pdf-snackbar__toolbar-visible":"",error:B,onSubmit:this.onReload,onCancel:this.onDismissError}):null),s&&s.metadata&&s.metadata.page_count>0?o.default.createElement(b.PreviewToolbar,{isFullscreen:!!f,onToolbarShow:this.onToolbarShow,onToolbarHide:this.onToolbarHide,stayVisible:this.state.persistToolbar},M.isSidebarEnabled(u.DocType.pdf,S,!!f)?o.default.createElement(G.SidebarToggleButton,{className:"toolbar-button-entry",formatMessage:te.formatMessage,isSidebarOpen:m&&!!m[u.DocType.pdf],onSidebarOpen:function(){return _(u.DocType.pdf,u.UserActionContext.Toolbar)},onSidebarClose:function(){return v(u.DocType.pdf,u.UserActionContext.Toolbar)}}):null,S!==g.SizeClass.Small?o.default.createElement(q.PreviewToolbarButton,{disabled:T<=0,spriteGroup:"web",spriteName:"up",tooltip:r._("Page up"),onClick:this.handlePageUpWithToolbarLogging}):null,o.default.createElement(G.PageIndicator,{className:"toolbar-button-entry",currentPageIndex:T||0,formatMessage:te.formatMessage,id:"preview-toolbar-page-indicator",onBlur:function(){return e.setState({persistToolbar:!1})},onFocus:function(){return e.setState({persistToolbar:!0})},onPageNumberUpdated:this.jumpToPageWithToolbarLogging,pageCount:z||1,shouldShowPageCount:S!==g.SizeClass.Small}),S!==g.SizeClass.Small?[o.default.createElement(q.PreviewToolbarButton,{disabled:T>=z-1,spriteGroup:"web",spriteName:"down",tooltip:r._("Page down"),onClick:this.handlePageDownWithToolbarLogging}),o.default.createElement(G.ZoomOutButton,{className:"toolbar-button-entry",disabled:N<=.1,formatMessage:te.formatMessage,onClick:this.handleZoomOutWithToolbarLogging}),o.default.createElement(G.ZoomInButton,{className:"toolbar-button-entry",disabled:N>=10,formatMessage:te.formatMessage,onClick:this.handleZoomInWithToolbarLogging}),o.default.createElement(G.FullScreenButton,{className:"toolbar-button-entry",formatMessage:te.formatMessage,onClick:function(){return A.toggleFullScreen(!!f,u.UserActionContext.Toolbar)}}),p?null:o.default.createElement(q.PreviewToolbarButton,{"data-test":"print",disabled:!V,spriteGroup:"web",spriteName:"print",tooltip:J.getPrintTooltip(E),onClick:V?function(){return e.print(u.UserActionContext.Toolbar)}:Y})]:null):null)},t})(o.default.PureComponent);t._PreviewPDF=re;var ae=function(e,t){return{docMetadata:h.getDocMetadataByRevisionId(e,t.revisionId),isSidebarOpen:m.getIsSidebarOpen(e),documentRectangleToMakeVisible:C.getDocumentRectangleToMakeVisibleIfComments2Ready(e),previewMetadata:h.getApiDataForRevisionId(e,t.revisionId),isVirtualPreview:h.getIsVirtualRevisionId(e,t.revisionId)}},ie={refreshBlobAction:v.refreshBlobAction,fetchDocMetadata:v.fetchDocMetadata,fetchDataForPageAction:v.fetchDataForPage,updateCurrentPageIndex:j.updateCurrentPageIndex,setPendingNumberedAnnotationMayBeOffscreen:ee,onSidebarOpen:V.openSidebar,onSidebarClose:V.closeSidebar},se=i.flow([R.withAnnotations,k.withFrameMessenger(F.FRAME_MESSAGES_FROM_PARENT),s.connect(ae,ie)])(re),le=function(e){return o.default.createElement(S.Dimensions,{className:"flex-preview-container"},function(t){var r=t.width,a=t.height;return o.default.createElement(se,n.__assign({},e,{width:r,height:a}))})};t.PreviewPDF=le}),define("modules/clean/react/previews/preview_ppt",["require","exports","tslib","react","external/classnames","modules/core/i18n","external/lodash","external/react-redux","file-viewer/core","modules/clean/react/file_viewer/constants","modules/clean/react/size_class/constants","modules/clean/react/keyboard_binding/keyboard_binding_connector","modules/clean/react/previews/loading_indicator","modules/clean/react/keyboard_binding/keyboard_binding","modules/clean/react/file_viewer/data/selectors","modules/clean/react/previews/preview_toolbar","modules/clean/react/file_viewer/location_utils","modules/clean/react/previews/pdf_viewer/utils","modules/clean/react/previews/pdf_viewer/transform","modules/clean/react/previews/pdf_viewer/urls","modules/clean/react/previews/pdf_viewer/keyboard_bindings","file-viewer/preview_doc","modules/clean/react/previews/powerpoint/close_button","modules/clean/react/previews/pdf_viewer/event_emitter","modules/clean/react/file_viewer/full_screen_helpers","modules/clean/react/previews/powerpoint/with_frame_messenger","modules/clean/react/previews/powerpoint/with_annotations","modules/clean/web_timing_logger","modules/clean/react/previews/powerpoint/with_document_metadata","modules/core/browser","modules/clean/react/previews/pdf_viewer/frame_messenger","file-viewer/strings","modules/clean/react/comments2/data/actions","modules/clean/react/comments2/data/selectors","modules/clean/react/comments2/data/types","modules/clean/react/previews/pdf_viewer/layers","modules/clean/react/previews/pdf_viewer/annotation_creation_layer","file-viewer/core","spectrum/dimensions","modules/clean/react/file_viewer/data/actions","modules/clean/previews/data/selectors","modules/clean/react/file_viewer/sidebar_helpers","modules/clean/react/file_viewer/data/actions","modules/clean/react/previews/preview_toolbar_button","file-viewer/toolbar","modules/clean/react/file_viewer/logging","file-viewer/assets-metaserver","modules/clean/react/previews/print_helpers","modules/clean/previews/actions","file-viewer/polyfills"],function(e,t,n,o,r,a,i,s,l,d,c,p,u,f,g,m,h,v,b,_,w,P,y,M,A,E,S,L,C,x,I,N,D,T,O,F,k,R,U,B,W,z,H,K,j,V,q,G,Z){"use strict";function Q(){}Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importDefault(o),r=n.__importDefault(r),L=n.__importStar(L),x=n.__importStar(x);var J=D.Actions.setPendingNumberedAnnotationMayBeOffscreen,X=R.createMetaserverFormatters("en",N.strings,R.createI18nCache()),Y=l.resolveAsset.bind(null,q.assets),$=(function(e){function t(t){var o=e.call(this,t)||this;return o.downloadSucceedLogged=!1,o.renderSucceededLogged=!1,o.containerRef=function(e){return o.containerDOM=e},o.state={isSidebarFocused:!1,clientScaleFactor:0,showSidebar:!0,persistToolbar:!1},o.renderer=null,o.onPageMouseEnter=function(e){o.annotationCreationDelegate&&(e.persist(),o.annotationCreationDelegate.onMouseEnterCallback(e))},o.onPageMouseMove=function(e){o.annotationCreationDelegate&&(e.persist(),o.annotationCreationDelegate.onMouseMoveCallback(e))},o.onPageMouseUp=function(e){o.annotationCreationDelegate&&(e.persist(),o.annotationCreationDelegate.onMouseUpCallback(e))},o.onPageMouseDown=function(e){o.renderer&&o.renderer.updatePageOffset(),o.annotationCreationDelegate&&(e.persist(),o.annotationCreationDelegate.onMouseDownCallback(e))},o.sendIdleMouse=i.debounce(function(){o.props.frameMessengerClient.postMessageToParent("idle-mouse")},1500),o.onMouseMove=i.throttle(function(){o.props.frameMessengerClient.postMessageToParent("active-mouse"),o.sendIdleMouse()},16),o.reload=function(){x.reload(!0)},o.dismissError=function(){o.setState({error:void 0})},o.setPage=function(e,t,n){var r=(void 0===n?o.props:n).docMetadata;r&&r.metadata&&(e<0||e>=r.metadata.page_count||(o.onPageChange(e),o.props.updateCurrentPageIndex(e)))},o.logRenderSuccess=function(){o.downloadSucceedLogged||(o.downloadSucceedLogged=!0,o.logFilePreviewEvent(d.EventType.FilePreviewDownloadSucceeded)),o.setState({pageRendered:!0}),o.renderSucceededLogged||(o.renderSucceededLogged=!0,o.logFilePreviewEvent(d.EventType.FilePreviewRenderSucceeded),"function"==typeof o.props.setRenderStatusSuccess&&o.props.setRenderStatusSuccess(),o.props.frameMessengerClient.postMessageToParent(I.WT_EVENT_PAGE_RENDERED))},o.onPageChange=function(e){var t=o.props,n=t.onPageChange,r=t.setPendingNumberedAnnotationMayBeOffscreen;n&&n(e),r()},o.logTTI=function(){L.mark_time_to_view(),L.mark_time_to_interactive();var e=o.props.filePreviewSession;e&&e.markPrimaryEvent()},o.pageDown=function(){var e=o.props;e.currentPageIndex<e.docMetadata.metadata.page_count-1&&o.props.pageDown()},o.pageUp=function(){o.props.currentPageIndex>0&&o.props.pageUp()},o.updateCurrentPageIndexWithToolbarLogging=V.wrapToolbarActionWithLogging(function(e){o.props.updateCurrentPageIndex(e)},d.UserAction.PageChange),o.handlePageUpWithToolbarLogging=V.wrapToolbarActionWithLogging(o.pageUp,d.UserAction.PageUp),o.handlePageDownWithToolbarLogging=V.wrapToolbarActionWithLogging(o.pageDown,d.UserAction.PageDown),o.onError=function(e){o.setState({error:e})},o.onToolbarShow=function(){o.setState({isToolbarVisible:!0})},o.onToolbarHide=function(){o.setState({isToolbarVisible:!1})},o.setupToolbar=function(){M.eventEmitter.on("error",o.onError)},o.teardownToolbar=function(){M.eventEmitter.off("error",o.onError)},o.zoomIn=function(){if(!o.props.isFullscreen){var e=Math.min(1.1*o.state.clientScaleFactor,10);o.setState({clientScaleFactor:e})}},o.zoomOut=function(){if(!o.props.isFullscreen){var e=Math.max(o.state.clientScaleFactor/1.1,.1);o.setState({clientScaleFactor:e})}},o.handleZoomInWithToolbarLogging=V.wrapToolbarActionWithLogging(o.zoomIn,d.UserAction.ZoomIn),o.handleZoomOutWithToolbarLogging=V.wrapToolbarActionWithLogging(o.zoomOut,d.UserAction.ZoomOut),o.print=function(e){o.props.autoprintUrl&&(Z.docPrint(o.props.autoprintUrl),V.logUserAction(d.UserAction.Print,e))},o.onPageUp=V.wrapKeyboardActionWithLogging(f.withPreventDefault(o.pageUp),d.UserAction.PageUp),o.onPageDown=V.wrapKeyboardActionWithLogging(f.withPreventDefault(o.pageDown),d.UserAction.PageDown),o.onZoomIn=V.wrapKeyboardActionWithLogging(f.withPreventDefault(o.zoomIn),d.UserAction.ZoomIn),o.onZoomOut=V.wrapKeyboardActionWithLogging(f.withPreventDefault(o.zoomOut),d.UserAction.ZoomOut),o.onPrintKeyPressed=f.withPreventDefault(function(){return o.print(d.UserActionContext.Keyboard)}),o.getPages=function(){
var e=o.props,t=e.docMetadata,n=void 0===t?{}:t,r=n.metadata,a=void 0===r?void 0:r,s=n.text,l=void 0===s?{}:s,d=e.imageUrlTmpl,c=e.useCanned;if(!a||!l||!a.page_count)return[];var p=v.expandDimensions(a.dimensions),u=b.transformPdfgenText(l);return i.range(0,a.page_count).map(function(e){return{pageIndex:e,dimension:p[e]||[0,0],textboxes:u[e]||[],links:l.links&&l.links[e]||[],thumbnailUrl:_.imageUrl(d,e,0,c),imgUrls:{"1x":_.imageUrl(d,e,0,c),"4x":_.imageUrl(d,e,400,c)}}})},o.renderLayers=function(e){return function(t){var r=F.generateLayers(e),a=o.props,i=a.annotationProps,s=a.comments2AnnotationsEnabled,l=t.data;return r(n.__assign({},t,{legacyProps:n.__assign({},t.legacyProps,{annotationCreationDelegate:o.annotationCreationDelegate,annotationProps:v.annotationsAtPage(i,l.pageIndex),comments2AnnotationsEnabled:s})}))}},o.logFilePreviewEvent(d.EventType.FilePreviewSupportConfirmed),t.docMetadata&&t.docMetadata.metadata&&o.logFilePreviewEvent(d.EventType.FilePreviewDownloadAttempted),o.annotationCreationDelegate=k.createAnnotationCreationDelegate(),o}return n.__extends(t,e),t.prototype.logFilePreviewEvent=function(e,t){void 0===t&&(t={});var n=this.props.filePreviewSession;n&&n.recordEvent(e,t)},t.prototype.componentDidMount=function(){this.logFilePreviewEvent(d.EventType.FilePreviewDownloadAttempted),this.setupToolbar();var e=this.props,t=e.docMetadata,n=e.startPage;t&&t.metadata&&n&&n>=0&&n<t.metadata.page_count&&this.setPage(n,l.UserActionContext.DocReset)},t.prototype.componentWillReceiveProps=function(e){var t=e.sizeClass,n=e.isFullscreen,o=e.isSidebarOpen,r=e.activatedAnnotationRectangle,a=e.docMetadata,i=e.annotationProps,s=z.isSidebarEnabled(d.DocType.ppt,t,!!n)&&!!(o||{})[d.DocType.ppt];if(this.setState({showSidebar:s}),r&&this.props.activatedAnnotationRectangle!==r&&this.setPage(r.page,l.UserActionContext.DocReset,e),a&&a.metadata){var c=a.metadata.dimensions;if(e.height!==this.props.height||e.width!==this.props.width){var p=R.calculateFitBox(e.width-(o?P.SIDEBAR_THUMBNAIL_WIDTH:0)-32,e.height,c[0][0]/c[0][1])[0];this.setState({clientScaleFactor:p/c[0][0]})}e.width===this.props.width&&e.height===this.props.height&&e.isSidebarOpen===this.props.isSidebarOpen||i&&v.resetAnnotationState(i.frameMessenger,this.containerDOM)}},t.prototype.componentDidUpdate=function(e){e.currentPageIndex!==this.props.currentPageIndex&&this.onPageChange(this.props.currentPageIndex)},t.prototype.componentWillUnmount=function(){this.teardownToolbar(),h.updatePageQuery(null),this.props.updateCurrentPageIndex(0)},t.prototype.render=function(){var e=this,t=this.props,n=t.autoprintUrl,i=t.docMetadata,s=t.annotationProps.isAnnotationRegionEnabled,f=t.isArchiveFile,g=t.isFullscreen,h=t.isSidebarOpen,v=t.onExitFullscreen,b=t.sharePermission,_=t.sizeClass,M=t.revisionId,E=t.width,S=t.height,L=t.comments2AnnotationsEnabled,C=t.currentPageIndex,x=t.onSidebarClose,I=t.onSidebarOpen,N=t.previewMetadata,D=this.state,T=D.clientScaleFactor,F=D.showSidebar,k=D.error,R=D.isToolbarVisible,U=D.pageRendered;if(!i||!i.metadata)return null;var B=i.metadata,W=B&&B.page_count>0,H=L===O.Comments2AnnotationsMode.Off,V=w.getSinglePageKeyboardBindings({pageUp:this.onPageUp,pageDown:this.onPageDown,zoomIn:this.onZoomIn,zoomOut:this.onZoomOut,print:this.onPrintKeyPressed}),q=this.getPages(),Z=null!=h&&!!h[d.DocType.ppt],J=G.canPrint(b)&&!!n;return o.default.createElement("div",{className:"preview-content preview-pdf preview-pdf-ssr",onMouseMove:this.onMouseMove,onTouchStart:this.onMouseMove,onTouchMove:this.onMouseMove},o.default.createElement("div",{className:r.default({"viewer-container":!0,"sidebar-visible":F})},U?null:o.default.createElement(u.LoadingIndicator,{className:"loading-indicator"}),g?o.default.createElement(y.CloseButton,{onClick:v}):null,o.default.createElement(p.KeyboardBindingConnector,{keyboardBindings:V}),o.default.createElement(P.PreviewPPT,{fileMetadata:{file_id:M,file_name:""},filePreviewUiData:{scaleFactor:T,currentPageIndex:C,isDocSidebarOpen:Z,minScaleFactor:0,isSidebarOpen:!1,currentMode:l.FileViewerMode.Default,sidebar:{visibility:l.SidebarVisibility.Closed,selectedControlId:l.SidebarControlId.Documentation,paneStack:[]}},previewMetadata:N,id:"",className:"pdf-viewer",pageClassName:r.default("page",{"legacy-region-creation-on":H&&s,"legacy-region-creation-off":H&&!s}),ref:function(t){return e.renderer=t},refCallback:this.containerRef,data:q,intl:X,onPageMouseDown:this.onPageMouseDown,onPageMouseEnter:this.onPageMouseEnter,onPageMouseMove:this.onPageMouseMove,onPageMouseUp:this.onPageMouseUp,onInteractive:this.logTTI,onRenderFailed:Q,onRenderSucceeded:this.logRenderSuccess,onPageChange:this.setPage,width:E,height:S,dispatch:Q,layerRenderFn:this.renderLayers,config:l.DEFAULT_CONFIG,resolveAsset:Y}),W?o.default.createElement(m.PreviewToolbar,{isFullscreen:g,onToolbarShow:this.onToolbarShow,onToolbarHide:this.onToolbarHide,stayVisible:this.state.persistToolbar},z.isSidebarEnabled(d.DocType.ppt,_,!!g)?o.default.createElement(j.SidebarToggleButton,{className:"toolbar-button-entry",formatMessage:X.formatMessage,isSidebarOpen:Z,onSidebarOpen:function(){return I(d.DocType.ppt,d.UserActionContext.Toolbar)},onSidebarClose:function(){return x(d.DocType.ppt,d.UserActionContext.Toolbar)}}):null,_!==c.SizeClass.Small?o.default.createElement(K.PreviewToolbarButton,{disabled:C<=0,spriteGroup:"web",spriteName:"up",tooltip:a._("Previous slide"),onClick:this.handlePageUpWithToolbarLogging}):null,o.default.createElement(j.PageIndicator,{className:"toolbar-button-entry",currentPageIndex:C||0,formatMessage:X.formatMessage,id:"preview-toolbar-page-indicator",onBlur:function(){return e.setState({persistToolbar:!1})},onFocus:function(){return e.setState({persistToolbar:!0})},onPageNumberUpdated:this.updateCurrentPageIndexWithToolbarLogging,pageCount:q.length||1,shouldShowPageCount:_!==c.SizeClass.Small}),_!==c.SizeClass.Small?[o.default.createElement(K.PreviewToolbarButton,{disabled:C>=q.length-1,spriteGroup:"web",spriteName:"down",tooltip:a._("Next slide"),onClick:this.handlePageDownWithToolbarLogging}),o.default.createElement(j.ZoomOutButton,{className:"toolbar-button-entry",disabled:T<=.1,formatMessage:X.formatMessage,onClick:this.handleZoomOutWithToolbarLogging}),o.default.createElement(j.ZoomInButton,{className:"toolbar-button-entry",disabled:T>=10,formatMessage:X.formatMessage,onClick:this.handleZoomInWithToolbarLogging}),o.default.createElement(j.FullScreenButton,{className:"toolbar-button-entry",formatMessage:X.formatMessage,onClick:function(){return A.toggleFullScreen(!!g,d.UserActionContext.Toolbar)}}),f?null:o.default.createElement(K.PreviewToolbarButton,{"data-test":"print",disabled:!J,spriteGroup:"web",spriteName:"print",tooltip:G.getPrintTooltip(b),onClick:J?function(){return e.print(d.UserActionContext.Toolbar)}:Q})]:null):null,k?o.default.createElement(P.ErrorSnackbar,{formatMessage:X.formatMessage,className:R?"pdf-snackbar__toolbar-visible":"",error:k,onSubmit:this.reload,onCancel:this.dismissError}):null))},t})(o.default.PureComponent);t._PreviewPPT=$;var ee=function(e,t){return{activatedAnnotationRectangle:T.getDocumentRectangleToMakeVisibleIfComments2Ready(e),currentPageIndex:g.getCurrentPageIndex(e)||0,isSidebarOpen:g.getIsSidebarOpen(e),previewMetadata:W.getApiDataForRevisionId(e,t.revisionId)}},te={pageDown:B.pageDown,pageUp:B.pageUp,updateCurrentPageIndex:B.updateCurrentPageIndex,setPendingNumberedAnnotationMayBeOffscreen:J,onSidebarOpen:H.openSidebar,onSidebarClose:H.closeSidebar},ne=i.flow([S.withAnnotations,C.withDocumentMetadata,E.withFrameMessenger(I.FRAME_MESSAGES_FROM_PARENT),s.connect(ee,te)])($),oe=function(e){return o.default.createElement(U.Dimensions,{className:"flex-preview-container"},function(t){var r=t.width,a=t.height;return o.default.createElement(ne,n.__assign({},e,{width:r,height:a}))})};t.PreviewPPT=oe});
//# sourceMappingURL=pkg-file_viewer_pdf.min.js-vflbelMsm.map